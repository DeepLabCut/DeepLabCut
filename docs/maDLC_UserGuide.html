
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>DeepLabCut for Multi-Animal Projects &#8212; DeepLabCut</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=03e43079" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=eba8b062" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.8ecb98da25f57f5357bf6f572d296f466b2cfe2517ffebfabe82451661e28f02.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9a2dae69"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docs/maDLC_UserGuide';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3D DeepLabCut" href="Overviewof3D.html" />
    <link rel="prev" title="DeepLabCut User Guide (for single animal projects)" href="standardDeepLabCut_UserGuide.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../README.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/logo.png" class="logo__image only-light" alt="DeepLabCut - Home"/>
    <script>document.write(`<img src="../_static/logo.png" class="logo__image only-dark" alt="DeepLabCut - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../README.html">
                    Welcome! 👋
                </a>
            </li>
        </ul>
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Getting Started</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="UseOverviewGuide.html">🥳 Get started with DeepLabCut: our key recommendations</a></li>


<li class="toctree-l1"><a class="reference internal" href="course.html">DeepLabCut Self-paced Course</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Installation</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="installation.html">How To Install DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/installTips.html">Installation Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="docker.html">DeepLabCut Docker containers</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Main User Guides</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="standardDeepLabCut_UserGuide.html">DeepLabCut User Guide (for single animal projects)</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">DeepLabCut for Multi-Animal Projects</a></li>

<li class="toctree-l1"><a class="reference internal" href="Overviewof3D.html">3D DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="HelperFunctions.html">Helper &amp; Advanced Optional Function Documentation</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Graphical User Interfaces (GUIs)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="gui/PROJECT_GUI.html">Interactive Project Manager GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="gui/napari_GUI.html">napari labeling GUI</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">DLC3 PyTorch Specific Docs</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="pytorch/user_guide.html">DeepLabCut 3.0 - PyTorch User Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch/pytorch_config.html">The PyTorch Configuration file</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch/architectures.html">DeepLabCut 3.0 - PyTorch Model Architectures</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Quick Start Tutorials</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="quick-start/single_animal_quick_guide.html">QUICK GUIDE to single Animal Training:</a></li>
<li class="toctree-l1"><a class="reference internal" href="quick-start/tutorial_maDLC.html">Multi-animal pose estimation with DeepLabCut: A 5-minute tutorial</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">🚀 Beginner's Guide to DeepLabCut</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="beginner-guides/beginners-guide.html">Using DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-guides/manage-project.html">Setting up what keypoints to track</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-guides/labeling.html">Labeling GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-guides/Training-Evaluation.html">Neural Network training and evaluation in the GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="beginner-guides/video-analysis.html">Video Analysis with DeepLabCut</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">🚀 Main Demo Notebooks</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_DEMO_SuperAnimal.html">DeepLabCut SuperAnimal models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_DEMO_mouse_openfield.html">DeepLabCut on Single Mouse Data Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_3miceDemo.html">DeepLabCut MultiMouse Data Demo</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_HumanPose_with_RTMPose.html">DeepLabCut RTMPose human pose estimation demo</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">🚀 Notebooks For Your Data</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_YOURDATA_SuperAnimal.html">DeepLabCut Model Zoo: SuperAnimal models</a></li>

<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_YOURDATA_TrainNetwork_VideoAnalysis.html">DeepLabCut for your standard (single animal) projects!</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_YOURDATA_maDLC_TrainNetwork_VideoAnalysis.html">DeepLabCut for your multi-animal projects!</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">🚀 Special Feature Demos</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_transformer_reID.html">Demo: How to use our Pose Transformer for unsupervised identity tracking of animals</a></li>

<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_BUCTD_and_CTD_tracking.html">DeepLabCut - Tutorial for BUCTD models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/JUPYTER/Demo_3D_DeepLabCut.html">3D DeepLabCut Toolbox</a></li>
<li class="toctree-l1"><a class="reference internal" href="../examples/COLAB/COLAB_DLC_ModelZoo.html">DeepLabCut Model Zoo user-contributed models</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">🧑‍🍳 Cookbook (detailed helper guides)</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="convert_maDLC.html">How to convert a pre-2.2 project for use with DeepLabCut 2.2 or later</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/OtherData.html">How to use data labeled outside of DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/io.html">Input/output manipulations with DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/nn.html">Model training tips &amp; tricks</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/post.html">Some data processing recipes!</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/BatchProcessing.html">Automate training and video analysis: Batch Processing</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/DLCMethods.html">How to write a DLC Methods Section</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/ClusteringNapari.html">Clustering in the napari-DeepLabCut GUI</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/OpenVINO.html">Intel OpenVINO backend</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/flip_and_rotate.html">Improving network performance on unbalanced data via augmentation 🦇</a></li>


<li class="toctree-l1"><a class="reference internal" href="recipes/pose_cfg_file_breakdown.html">The <code class="docutils literal notranslate"><span class="pre">pose_cfg.yaml</span></code> Guideline Handbook</a></li>



<li class="toctree-l1"><a class="reference internal" href="recipes/publishing_notebooks_into_the_DLC_main_cookbook.html">Publishing Notebooks into the Main DLC Cookbook</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Hardware Tips</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="recipes/TechHardware.html">Technical (Hardware) Considerations</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">DeepLabCut-Live!</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="deeplabcutlive.html">DeepLabCut-Live!</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">🦄 DeepLabCut Model Zoo</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="ModelZoo.html">The DeepLabCut Model Zoo!</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes/UsingModelZooPupil.html">Using ModelZoo models on your own datasets</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">DeepLabCut Benchmarking</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="benchmark.html">DeepLabCut benchmark</a></li>
<li class="toctree-l1"><a class="reference internal" href="pytorch/Benchmarking_shuffle_guide.html">DeepLabCut Benchmarking - User Guide</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Mission &amp; Contribute</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="MISSION_AND_VALUES.html">Mission and Values of DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="roadmap.html">A development roadmap for DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="Governance.html">Governance Model of DeepLabCut</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CONTRIBUTING.html">How to Contribute to DeepLabCut</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Citations for DeepLabCut</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="citation.html">How to Cite DeepLabCut</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/DeepLabCut/DeepLabCut" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/DeepLabCut/DeepLabCut/issues/new?title=Issue%20on%20page%20%2Fdocs/maDLC_UserGuide.html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/docs/maDLC_UserGuide.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>DeepLabCut for Multi-Animal Projects</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">DeepLabCut for Multi-Animal Projects</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-think-about-using-madlc">How to think about using maDLC:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install">Install:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-started-in-the-terminal-or-project-gui">Get started in the terminal or Project GUI:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-create-a-new-project">(A) Create a New Project</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#api-docs">API Docs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.create_project.new.create_new_project"><code class="docutils literal notranslate"><span class="pre">create_new_project()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#b-configure-the-project">(B) Configure the Project</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-select-frames-to-label">(C) Select Frames to Label</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.frame_extraction.extract_frames"><code class="docutils literal notranslate"><span class="pre">extract_frames()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-label-frames">(D) Label Frames</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#e-check-annotated-frames">(E) Check Annotated Frames</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.check_labels"><code class="docutils literal notranslate"><span class="pre">check_labels()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#f-create-training-dataset">(F) Create Training Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset"><code class="docutils literal notranslate"><span class="pre">create_training_dataset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_model_comparison"><code class="docutils literal notranslate"><span class="pre">create_training_model_comparison()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset_from_existing_split"><code class="docutils literal notranslate"><span class="pre">create_training_dataset_from_existing_split()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#g-train-the-network">(G) Train The Network</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.train_network"><code class="docutils literal notranslate"><span class="pre">train_network()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#h-evaluate-the-trained-network">(H) Evaluate the Trained Network</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.evaluate_network"><code class="docutils literal notranslate"><span class="pre">evaluate_network()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-analyze-new-videos">(I) Analyze new Videos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#animal-assembly-and-tracking-across-frames">Animal Assembly and Tracking across frames</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#optimized-animal-assembly-video-analysis">Optimized Animal Assembly + Video Analysis:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-auto-track-true">IF auto_track = True:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-auto-track-false">IF auto_track = False:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">API Docs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.analyze_videos"><code class="docutils literal notranslate"><span class="pre">analyze_videos()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.convert_detections2tracklets"><code class="docutils literal notranslate"><span class="pre">convert_detections2tracklets()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.refine_training_dataset.stitch.stitch_tracklets"><code class="docutils literal notranslate"><span class="pre">stitch_tracklets()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-unsupervised-identity-tracking">Using Unsupervised Identity Tracking:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refine-tracklets">Refine Tracklets:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#j-filter-pose-data">(J) Filter Pose Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.post_processing.filtering.filterpredictions"><code class="docutils literal notranslate"><span class="pre">filterpredictions()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#k-plot-trajectories-l-create-labeled-videos">(K) Plot Trajectories , (L) Create Labeled Videos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.utils.plotting.plot_trajectories"><code class="docutils literal notranslate"><span class="pre">plot_trajectories()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.utils.make_labeled_video.create_labeled_video"><code class="docutils literal notranslate"><span class="pre">create_labeled_video()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#help">HELP:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tips-for-daily-use">Tips for “daily” use:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-help-with-madlc">Getting help with maDLC:</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="deeplabcut-for-multi-animal-projects">
<span id="multi-animal-userguide"></span><h1>DeepLabCut for Multi-Animal Projects<a class="headerlink" href="#deeplabcut-for-multi-animal-projects" title="Link to this heading">#</a></h1>
<p>This document should serve as the user guide for maDLC,
and it is here to support the scientific advances presented in <a class="reference external" href="https://doi.org/10.1038/s41592-022-01443-0">Lauer et al. 2022</a>.</p>
<p>Note, we strongly encourage you to use the <a class="reference internal" href="gui/PROJECT_GUI.html#project-manager-gui"><span class="std std-ref">Project Manager GUI</span></a> when you first start using multi-animal mode. Each tab is customized for multi-animal when you create or load a multi-animal project. As long as you follow the recommendations within the GUI, you should be good to go!</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.0: </span>PyTorch is now available as a deep learning engine for pose estimation models, along
with new model architectures! For more information about moving from TensorFlow to
PyTorch (if you’re already familiar with DeepLabCut &amp; the TensorFlow engine),
check out <a class="reference internal" href="pytorch/user_guide.html#dlc3-user-guide"><span class="std std-ref">the PyTorch user guide</span></a>. If you’re just starting
out with DeepLabCut, we suggest you use the PyTorch backend.</p>
</div>
<section id="how-to-think-about-using-madlc">
<h2>How to think about using maDLC:<a class="headerlink" href="#how-to-think-about-using-madlc" title="Link to this heading">#</a></h2>
<p>You should think of maDLC being <strong>four</strong> parts.</p>
<ul class="simple">
<li><p>(1) Curate annotation data that allows you to learn a model to track the objects/animals of interest.</p></li>
<li><p>(2) Create a high-quality pose estimation model.</p></li>
<li><p>(3) Track in space and time, i.e., assemble bodyparts to detected objects/animals and link across time. This step performs assembly and tracking (comprising first local tracking and then tracklet stitching by global reasoning).</p></li>
<li><p>(4) Any and all post-processing you wish to do with the output data, either within DLC or outside of it.</p></li>
</ul>
<p>Thus, you should always label, train, and evaluate the pose estimation performance first. If and when that performance is high, then you should go advance to the tracking step (and video analysis). There is a natural break point for this, as you will see below.</p>
<img src="https://images.squarespace-cdn.com/content/v1/57f6d51c9f74566f55ecf271/1596370260800-SP2GWKDPJCOIR7LJ31VM/ke17ZwdGBToddI8pDm48kB4fL2ovSQh5dRlH2jCMtpoUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8N_N4V1vUb5AoIIIbLZhVYxCRW4BPu10St3TBAUQYVKcSV94BuD0XUinmig_1P1RJNYVU597j3jgswapL4c_w92BJE9r6UgUperYhWQ2ubQ_/workflow.png?format=2500w" width="550" title="maDLC" alt="maDLC" align="center" vspace = "50">
</section>
<section id="install">
<h2>Install:<a class="headerlink" href="#install" title="Link to this heading">#</a></h2>
<p><strong>Quick start:</strong> If you are using DeepLabCut on the cloud, or otherwise cannot use the GUIs and you should install with: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">'deeplabcut'</span></code>; if you need GUI support, please use: <code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">'deeplabcut[gui]'</span></code>. Check the <a class="reference internal" href="installation.html#how-to-install"><span class="std std-ref">installation page</span></a> for more information, including GPU support.</p>
<p>IF you want to use the bleeding edge version to make edits to the code, see <a class="reference external" href="https://deeplabcut.github.io/DeepLabCut/docs/recipes/installTips.html#how-to-use-the-latest-updates-directly-from-github">here on how to install it and test it</a>.</p>
</section>
<section id="get-started-in-the-terminal-or-project-gui">
<h2>Get started in the terminal or Project GUI:<a class="headerlink" href="#get-started-in-the-terminal-or-project-gui" title="Link to this heading">#</a></h2>
<p><strong>GUI:</strong> simply launch your conda env, and type <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span> <span class="pre">deeplabcut</span></code> in the terminal.
Then follow the tabs! It might be useful to read the following, however, so you understand what each command does.</p>
<p><strong>TERMINAL:</strong> To begin, 🚨 (windows) navigate to anaconda prompt and right-click to “open as admin”, or (unix/MacOS) simply launch “terminal” on your computer. We assume you have DeepLabCut installed (if not, <a class="reference internal" href="installation.html#how-to-install"><span class="std std-ref">see installation instructions</span></a>). Next, launch your conda env (i.e., for example <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">activate</span> <span class="pre">DEEPLABCUT</span></code>).</p>
<div class="admonition hint">
<p class="admonition-title">Hint</p>
<p>🚨 If you use Windows, please always open the terminal with administrator privileges! Right click, and “run as administrator”.</p>
</div>
<p>Please read more <a class="reference external" href="https://deeplabcut.github.io/DeepLabCut/docs/docker.html">here</a>, and in our Nature Protocols paper <a class="reference external" href="https://www.nature.com/articles/s41596-019-0176-0">here</a>. And, see our <a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/wiki/Troubleshooting-Tips">troubleshooting wiki</a>.</p>
<p>Open an <code class="docutils literal notranslate"><span class="pre">ipython</span></code> session and import the package by typing in the terminal:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ipython</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">deeplabcut</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>for every function there is a associated help document that can be viewed by adding a <strong>?</strong> after the function name; i.e. <code class="docutils literal notranslate"><span class="pre">deeplabcut.create_new_project?</span></code>. To exit this help screen, type <code class="docutils literal notranslate"><span class="pre">:q</span></code>.</p>
</div>
<section id="a-create-a-new-project">
<h3>(A) Create a New Project<a class="headerlink" href="#a-create-a-new-project" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_new_project</span><span class="p">(</span>
    <span class="s2">&quot;ProjectName&quot;</span><span class="p">,</span>
    <span class="s2">&quot;YourName&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;/usr/FullPath/OfVideo1.avi&quot;</span><span class="p">,</span> <span class="s2">&quot;/usr/FullPath/OfVideo2.avi&quot;</span><span class="p">,</span> <span class="s2">&quot;/usr/FullPath/OfVideo1.avi&quot;</span><span class="p">],</span>
    <span class="n">copy_videos</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">multianimal</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Tip: if you want to place the project folder somewhere specific, please also pass : <code class="docutils literal notranslate"><span class="pre">working_directory</span> <span class="pre">=</span> <span class="pre">&quot;FullPathOftheworkingDirectory&quot;</span></code></p>
<ul class="simple">
<li><p>Note, if you are a linux/macOS user the path should look like: <code class="docutils literal notranslate"><span class="pre">[&quot;/home/username/yourFolder/video1.mp4&quot;]</span></code>; if you are a Windows user, it should look like: <code class="docutils literal notranslate"><span class="pre">[r&quot;C:\username\yourFolder\video1.mp4&quot;]</span></code></p></li>
<li><p>Note, you can also put <code class="docutils literal notranslate"><span class="pre">config_path</span> <span class="pre">=</span> </code> in front of the above line to create the path to the config.yaml that is used in the next step, i.e. <code class="docutils literal notranslate"><span class="pre">config_path=deeplabcut.create_project(...)</span></code>)</p>
<ul>
<li><p>If you do not, we recommend setting a variable so this can be easily used! Once you run this step, the config_path is printed for you once you run this line, so set a variable for ease of use, i.e. something like:</p></li>
</ul>
</li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config_path</span> <span class="o">=</span> <span class="s1">&#39;/thefulloutputpath/config.yaml&#39;</span>
</pre></div>
</div>
<ul class="simple">
<li><p>just be mindful of the formatting for Windows vs. Unix, see above.</p></li>
</ul>
<p>This set of arguments will create a project directory with the name <strong>Name of the project+name of the experimenter+date of creation of the project</strong> in the <strong>Working directory</strong> and creates the symbolic links to videos in the <strong>videos</strong> directory. The project directory will have subdirectories: <strong>dlc-models</strong>, <strong>dlc-models-pytorch</strong>, <strong>labeled-data</strong>, <strong>training-datasets</strong>, and <strong>videos</strong>.  All the outputs generated during the course of a project will be stored in one of these subdirectories, thus allowing each project to be curated in separation from other projects. The purpose of the subdirectories is as follows:</p>
<p><strong>dlc-models</strong> and <strong>dlc-models-pytorch</strong> have a similar structure: the first contains
files for the TensorFlow engine while the second contains files for the PyTorch engine.
At the top level in these directories, there are
directories referring to different iterations of labels refinement (see below): <strong>iteration-0</strong>, <strong>iteration-1</strong>, etc.
The refinement iterations directories store shuffle directories, each shuffle directory stores model data related to a
particular experiment: trained and tested on a particular training and testing sets, and with a particular model
architecture. Each shuffle directory contains the subdirectories <em>test</em> and <em>train</em>, each of which holds the meta
information with regard to the parameters of the feature detectors in configuration files. The configuration files are
YAML files, a common human-readable data serialization language. These files can be opened and edited with standard text
editors. The subdirectory <em>train</em> will store checkpoints (called snapshots) during training of the model. These
snapshots allow the user to reload the trained model without re-training it, or to pick-up training from a particular
saved checkpoint, in case the training was interrupted.</p>
<p><strong>labeled-data:</strong> This directory will store the frames used to create the training dataset. Frames from different videos are stored in separate subdirectories. Each frame has a filename related to the temporal index within the corresponding video, which allows the user to trace every frame back to its origin.</p>
<p><strong>training-datasets:</strong>  This directory will contain the training dataset used to train the network and metadata, which contains information about how the training dataset was created.</p>
<p><strong>videos:</strong> Directory of video links or videos. When <strong>copy_videos</strong> is set to <code class="docutils literal notranslate"><span class="pre">False</span></code>, this directory contains symbolic links to the videos. If it is set to <code class="docutils literal notranslate"><span class="pre">True</span></code> then the videos will be copied to this directory. The default is <code class="docutils literal notranslate"><span class="pre">False</span></code>. Additionally, if the user wants to add new videos to the project at any stage, the function <strong>add_new_videos</strong> can be used. This will update the list of videos in the project’s configuration file. Note: you neither need to use this folder for videos, nor is it required for analyzing videos (they can be anywhere).</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">add_new_videos</span><span class="p">(</span>
    <span class="s2">&quot;Full path of the project configuration file*&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;full path of video 4&quot;</span><span class="p">,</span> <span class="s2">&quot;full path of video 5&quot;</span><span class="p">],</span>
    <span class="n">copy_videos</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>*Please note, <em>Full path of the project configuration file</em> will be referenced as <code class="docutils literal notranslate"><span class="pre">config_path</span></code> throughout this protocol.</p>
<p>You can also use annotated data from single-animal projects, by converting those files.
There are docs for this: <a class="reference internal" href="convert_maDLC.html#convert-madlc"><span class="std std-ref">convert single to multianimal annotation data</span></a></p>
<p><img alt="Box 1 - Multi Animal Project Configuration File Glossary" src="../_images/box1-multi.png" /></p>
</section>
<section id="api-docs">
<h3>API Docs<a class="headerlink" href="#api-docs" title="Link to this heading">#</a></h3>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.create_project.new.create_new_project">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.create_project.new.</span></span><span class="sig-name descname"><span class="pre">create_new_project</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">project</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">experimenter</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">working_directory</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">copy_videos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">multianimal</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">individuals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.create_project.new.create_new_project" title="Link to this definition">#</a></dt>
<dd><p>Create the necessary folders and files for a new project.</p>
<p>Creating a new project involves creating the project directory, sub-directories and
a basic configuration file. The configuration file is loaded with the default
values. Change its parameters to your projects need.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>project</strong><span class="classifier">string</span></dt><dd><p>The name of the project.</p>
</dd>
<dt><strong>experimenter</strong><span class="classifier">string</span></dt><dd><p>The name of the experimenter.</p>
</dd>
<dt><strong>videos</strong><span class="classifier">list[str]</span></dt><dd><p>A list of strings representing the full paths of the videos to include in the
project. If the strings represent a directory instead of a file, all videos of
<code class="docutils literal notranslate"><span class="pre">videotype</span></code> will be imported.</p>
</dd>
<dt><strong>working_directory</strong><span class="classifier">string, optional</span></dt><dd><p>The directory where the project will be created. The default is the
<code class="docutils literal notranslate"><span class="pre">current</span> <span class="pre">working</span> <span class="pre">directory</span></code>.</p>
</dd>
<dt><strong>copy_videos</strong><span class="classifier">bool, optional, Default: False.</span></dt><dd><p>If True, the videos are copied to the <code class="docutils literal notranslate"><span class="pre">videos</span></code> directory. If False, symlinks
of the videos will be created in the <code class="docutils literal notranslate"><span class="pre">project/videos</span></code> directory; in the event
of a failure to create symbolic links, videos will be moved instead.</p>
</dd>
<dt><strong>multianimal: bool, optional. Default: False.</strong></dt><dd><p>For creating a multi-animal project (introduced in DLC 2.2)</p>
</dd>
<dt><strong>individuals: list[str]|None = None,</strong></dt><dd><p>Relevant only if multianimal is True.
list of individuals to be used in the project configuration.
If None - defaults to [‘individual1’, ‘individual2’, ‘individual3’]</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>str</dt><dd><p>Path to the new project configuration file.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Linux/MacOS:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_new_project</span><span class="p">(</span>
<span class="go">        project=&#39;reaching-task&#39;,</span>
<span class="go">        experimenter=&#39;Linus&#39;,</span>
<span class="go">        videos=[</span>
<span class="go">            &#39;/data/videos/mouse1.avi&#39;,</span>
<span class="go">            &#39;/data/videos/mouse2.avi&#39;,</span>
<span class="go">            &#39;/data/videos/mouse3.avi&#39;</span>
<span class="go">        ],</span>
<span class="go">        working_directory=&#39;/analysis/project/&#39;,</span>
<span class="go">    )</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_new_project</span><span class="p">(</span>
<span class="go">        project=&#39;reaching-task&#39;,</span>
<span class="go">        experimenter=&#39;Linus&#39;,</span>
<span class="go">        videos=[&#39;/data/videos&#39;],</span>
<span class="go">        videotype=&#39;.mp4&#39;,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Windows:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_new_project</span><span class="p">(</span>
<span class="go">        &#39;reaching-task&#39;,</span>
<span class="go">        &#39;Bill&#39;,</span>
<span class="go">        [r&#39;C:\yourusername\rig-95\Videos\reachingvideo1.avi&#39;],</span>
<span class="go">        copy_videos=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Users must format paths with either:  r’C:OR ‘C:\ &lt;- i.e. a double backslash )</p>
</dd></dl>

</div>
</section>
<section id="b-configure-the-project">
<h3>(B) Configure the Project<a class="headerlink" href="#b-configure-the-project" title="Link to this heading">#</a></h3>
<p>Next, open the <strong>config.yaml</strong> file, which was created during  <strong>create_new_project</strong>.
You can edit this file in any text editor. Familiarize yourself with the meaning of the
parameters (Box 1). You can edit various parameters, in particular you <strong>must add the list of <em>individuals</em> and <em>bodyparts</em> (or points of interest)</strong>.</p>
<img src="https://images.squarespace-cdn.com/content/v1/57f6d51c9f74566f55ecf271/1588892210304-EW7WD46PYAU43WWZS4QZ/ke17ZwdGBToddI8pDm48kAXtGtTuS2U1SVcl-tYMBOAUqsxRUqqbr1mOJYKfIPR7LoDQ9mXPOjoJoqy81S2I8PaoYXhp6HxIwZIk7-Mi3Tsic-L2IOPH3Dwrhl-Ne3Z2YjE9w60pqfeJxDohDRZk1jXSVCSSfcEA7WmgMAGpjTehHAH51QaxKq4KdVMVBxpG/1nktc1kdgq2.jpg?format=1000w" width="175" title="colormaps" alt="DLC Utils" align="right" vspace = "50">
<p>You can also set the <em>colormap</em> here that is used for all downstream steps (can also be edited at anytime), like labeling GUIs, videos, etc. Here any <a class="reference external" href="https://matplotlib.org/tutorials/colors/colormaps.html">matplotlib colormaps</a> will do!</p>
<p>An easy way to programmatically edit the config file at any time is to use the function <strong>edit_config</strong>, which takes the full path of the config file to edit and a dictionary of key–value pairs to overwrite.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span><span class="w"> </span><span class="nn">deeplabcut</span>

<span class="n">config_path</span> <span class="o">=</span> <span class="s2">&quot;/path/to/project-dlc-2025-01-01/config.yaml&quot;</span>
<span class="n">edits</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;colormap&quot;</span><span class="p">:</span> <span class="s2">&quot;summer&quot;</span><span class="p">,</span>
    <span class="s2">&quot;individuals&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;mickey&quot;</span><span class="p">,</span> <span class="s2">&quot;minnie&quot;</span><span class="p">,</span> <span class="s2">&quot;bianca&quot;</span><span class="p">],</span>
    <span class="s2">&quot;skeleton&quot;</span><span class="p">:</span> <span class="p">[[</span><span class="s2">&quot;snout&quot;</span><span class="p">,</span> <span class="s2">&quot;tailbase&quot;</span><span class="p">],</span> <span class="p">[</span><span class="s2">&quot;snout&quot;</span><span class="p">,</span> <span class="s2">&quot;rightear&quot;</span><span class="p">]]</span>
<span class="p">}</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">auxiliaryfunctions</span><span class="o">.</span><span class="n">edit_config</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">edits</span><span class="p">)</span>
</pre></div>
</div>
<p>Please DO NOT have spaces in the names of bodyparts, uniquebodyparts, individuals, etc.</p>
<p><strong>ATTENTION:</strong> You need to edit the config.yaml file to <strong>modify the following items</strong> which specify the animal ID, bodyparts, and any unique labels. Note, we also highly recommend that you use <strong>more bodyparts</strong> that you might be interested in for your experiment, i.e., labeling along the spine/tail for 8 bodyparts would be better than four. This will help the performance.</p>
<p>Modifying the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> is crucial:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">individuals</span><span class="p">:</span>
<span class="o">-</span> <span class="n">m1</span>
<span class="o">-</span> <span class="n">m2</span>
<span class="o">-</span> <span class="n">m3</span>

<span class="n">uniquebodyparts</span><span class="p">:</span>
<span class="o">-</span> <span class="n">topleftcornerofBox</span>
<span class="o">-</span> <span class="n">toprightcornerofBox</span>

<span class="n">multianimalbodyparts</span><span class="p">:</span>
<span class="o">-</span> <span class="n">snout</span>
<span class="o">-</span> <span class="n">leftear</span>
<span class="o">-</span> <span class="n">rightear</span>
<span class="o">-</span> <span class="n">tailbase</span>

<span class="n">identity</span><span class="p">:</span> <span class="kc">True</span><span class="o">/</span><span class="kc">False</span>
</pre></div>
</div>
<p><strong>Individuals:</strong> are names of “individuals” in the annotation dataset. These should/can be generic (e.g. mouse1, mouse2, etc.). These individuals are comprised of the same bodyparts defined by <code class="docutils literal notranslate"><span class="pre">multianimalbodyparts</span></code>. For annotation in the GUI and training, it is important that all individuals in each frame are labeled. Thus, keep in mind that you need to set individuals to the maximum number in your labeled-data set, .i.e., if there is (even just one frame) with 17 animals then the list should be <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">indv1</span></code> to <code class="docutils literal notranslate"><span class="pre">-</span> <span class="pre">indv17</span></code>. Note, once trained if you have a video with more or less animals, that is fine - you can have more or less animals during video analysis!</p>
<p><strong>Identity:</strong> If you can tell the animals apart, i.e.,  one might have a collar, or a black marker on the tail of a mouse, then you should label these individuals consistently (i.e., always label the mouse with the black marker as “indv1”, etc). If you have this scenario, please set <code class="docutils literal notranslate"><span class="pre">identity:</span> <span class="pre">True</span></code> in your <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file. If you have 4 black mice, and you truly cannot tell them apart, then leave this as <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
<p><strong>Multianimalbodyparts:</strong> are the bodyparts of each individual (in the above list).</p>
<p><strong>Uniquebodyparts:</strong> are points that you want to track, but that appear only once within each frame, i.e. they are “unique”. Typically these are things like unique objects, landmarks, tools, etc. They can also be animals, e.g. in the case where one German shepherd is attending to many sheep the sheep bodyparts would be multianimalbodyparts, the shepherd parts would be uniquebodyparts and the individuals would be the list of sheep (e.g. Polly, Molly, Dolly, …).</p>
</section>
<section id="c-select-frames-to-label">
<h3>(C) Select Frames to Label<a class="headerlink" href="#c-select-frames-to-label" title="Link to this heading">#</a></h3>
<p><strong>CRITICAL:</strong> A good training dataset should consist of a sufficient number of frames that capture the breadth of the behavior. This ideally implies to select the frames from different (behavioral) sessions, different lighting and different animals, if those vary substantially (to train an invariant, robust feature detector). Thus for creating a robust network that you can reuse in the laboratory, a good training dataset should reflect the diversity of the behavior with respect to postures, luminance conditions, background conditions, animal identities, etc. of the data that will be analyzed. For the simple lab behaviors comprising mouse reaching, open-field behavior and fly behavior, 100−200 frames gave good results <a class="reference external" href="https://www.nature.com/articles/s41593-018-0209-y">Mathis et al, 2018</a>. However, depending on the required accuracy, the nature of behavior, the video quality (e.g. motion blur, bad lighting) and the context, more or less frames might be necessary to create a good network. Ultimately, in order to scale up the analysis to large collections of videos with perhaps unexpected conditions, one can also refine the data set in an adaptive way (see refinement below). <strong>For maDLC, be sure you have labeled frames with closely interacting animals!</strong></p>
<p>The function <code class="docutils literal notranslate"><span class="pre">extract_frames</span></code> extracts frames from all the videos in the project configuration file in order to create a training dataset. The extracted frames from all the videos are stored in a separate subdirectory named after the video file’s name under the ‘labeled-data’. This function also has various parameters that might be useful based on the user’s need.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
    <span class="n">config_path</span><span class="p">,</span>
    <span class="n">mode</span><span class="o">=</span><span class="s1">&#39;automatic/manual&#39;</span><span class="p">,</span>
    <span class="n">algo</span><span class="o">=</span><span class="s1">&#39;uniform/kmeans&#39;</span><span class="p">,</span>
    <span class="n">userfeedback</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">crop</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p><strong>CRITICAL POINT:</strong> It is advisable to keep the frame size small, as large frames increase the training and
inference time, or you might not have a large enough GPU for this.
When running the function <code class="docutils literal notranslate"><span class="pre">extract_frames</span></code>, if the parameter crop=True, then you will be asked to draw a box within the GUI (and this is written to the config.yaml file).</p>
<p><code class="docutils literal notranslate"><span class="pre">userfeedback</span></code> allows the user to check which videos they wish to extract frames from. In this way, if you added more videos to the config.yaml file it does not, by default, extract frames (again) from every video. If you wish to disable this question, set <code class="docutils literal notranslate"><span class="pre">userfeedback</span> <span class="pre">=</span> <span class="pre">True</span></code>.</p>
<p>The provided function either selects frames from the videos in a randomly and temporally uniformly distributed
way (uniform), by clustering based on visual appearance (k-means), or by manual selection. Random
selection of frames works best for behaviors where the postures vary across the whole video. However, some behaviors
might be sparse, as in the case of reaching where the reach and pull are very fast and the mouse is not moving much
between trials (thus, we have the default set to True, as this is best for most use-cases we encounter). In such a case, the function that allows selecting frames based on k-means derived quantization would
be useful. If the user chooses to use k-means as a method to cluster the frames, then this function downsamples the
video and clusters the frames using k-means, where each frame is treated as a vector. Frames from different clusters
are then selected. This procedure makes sure that the frames look different. However, on large and long videos, this
code is slow due to computational complexity.</p>
<p><strong>CRITICAL POINT:</strong> It is advisable to extract frames from a period of the video that contains interesting
behaviors, and not extract the frames across the whole video. This can be achieved by using the start and stop
parameters in the config.yaml file. Also, the user can change the number of frames to extract from each video using
the numframes2extract in the config.yaml file.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For maDLC,  <strong>be sure you have labeled frames with closely interacting animals</strong>!
Therefore, manually selecting some frames is a good idea if interactions are not highly
frequent in the video.</p>
</div>
<p>However, picking frames is highly dependent on the data and the behavior being studied.
Therefore, it is hard to provide all purpose code that extracts frames to create a good
training dataset for every behavior and animal. If the user feels specific frames are
lacking, they can extract hand selected frames of interest using the interactive GUI
provided along with the toolbox. This can be launched by using:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="s1">&#39;manual&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>// FIXME(niels) - add a napari frame extractor description.
The user can use the <em>Load Video</em> button to load one of the videos in the project
configuration file, use the scroll bar to navigate across the video and <em>Grab a Frame</em>.
The user can also look at the extracted frames and e.g. delete frames (from the
directory) that are too similar before reloading the set and then manually annotating
them.</p>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.generate_training_dataset.frame_extraction.extract_frames">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.generate_training_dataset.frame_extraction.</span></span><span class="sig-name descname"><span class="pre">extract_frames</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'automatic'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">algo</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'kmeans'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">crop</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">userfeedback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_step</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_resizewidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">30</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cluster_color</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">opencv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">slider_width</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">25</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">config3d</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extracted_cam</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos_list</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.generate_training_dataset.frame_extraction.extract_frames" title="Link to this definition">#</a></dt>
<dd><p>Extracts frames from the project videos.</p>
<p>Frames will be extracted from videos listed in the config.yaml file.</p>
<p>The frames are selected from the videos in a randomly and temporally uniformly
distributed way (<code class="docutils literal notranslate"><span class="pre">uniform</span></code>), by clustering based on visual appearance
(<code class="docutils literal notranslate"><span class="pre">k-means</span></code>), or by manual selection.</p>
<p>After frames have been extracted from all videos from one camera, matched frames
from other cameras can be extracted using <code class="docutils literal notranslate"><span class="pre">mode</span> <span class="pre">=</span> <span class="pre">&quot;match&quot;</span></code>. This is necessary if
you plan to use epipolar lines to improve labeling across multiple camera angles.
It will overwrite previously extracted images from the second camera angle if
necessary.</p>
<p>Please refer to the user guide for more details on methods and parameters
<a class="reference external" href="https://www.nature.com/articles/s41596-019-0176-0">https://www.nature.com/articles/s41596-019-0176-0</a> or the preprint:
<a class="reference external" href="https://www.biorxiv.org/content/biorxiv/early/2018/11/24/476531.full.pdf">https://www.biorxiv.org/content/biorxiv/early/2018/11/24/476531.full.pdf</a></p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the config.yaml file as a string.</p>
</dd>
<dt><strong>mode</strong><span class="classifier">string. Either <code class="docutils literal notranslate"><span class="pre">&quot;automatic&quot;</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;manual&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;match&quot;</span></code>.</span></dt><dd><p>String containing the mode of extraction. It must be either <code class="docutils literal notranslate"><span class="pre">&quot;automatic&quot;</span></code> or
<code class="docutils literal notranslate"><span class="pre">&quot;manual&quot;</span></code> to extract the initial set of frames. It can also be <code class="docutils literal notranslate"><span class="pre">&quot;match&quot;</span></code>
to match frames between the cameras in preparation for the use of epipolar line
during labeling; namely, extract from camera_1 first, then run this to extract
the matched frames in camera_2.</p>
<p>WARNING: if you use <code class="docutils literal notranslate"><span class="pre">&quot;match&quot;</span></code>, and you previously extracted and labeled
frames from the second camera, this will overwrite your data. This will require
you to delete the <code class="docutils literal notranslate"><span class="pre">collectdata(.h5/.csv)</span></code> files before labeling. Use with
caution!</p>
</dd>
<dt><strong>algo</strong><span class="classifier">string, Either <code class="docutils literal notranslate"><span class="pre">&quot;kmeans&quot;</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;uniform&quot;</span></code>, Default: <cite>“kmeans”</cite>.</span></dt><dd><p>String specifying the algorithm to use for selecting the frames. Currently,
deeplabcut supports either <code class="docutils literal notranslate"><span class="pre">kmeans</span></code> or <code class="docutils literal notranslate"><span class="pre">uniform</span></code> based selection. This flag
is only required for <code class="docutils literal notranslate"><span class="pre">automatic</span></code> mode and the default is <code class="docutils literal notranslate"><span class="pre">kmeans</span></code>. For
<code class="docutils literal notranslate"><span class="pre">&quot;uniform&quot;</span></code>, frames are picked in temporally uniform way, <code class="docutils literal notranslate"><span class="pre">&quot;kmeans&quot;</span></code>
performs clustering on downsampled frames (see user guide for details).</p>
<p>NOTE: Color information is discarded for <code class="docutils literal notranslate"><span class="pre">&quot;kmeans&quot;</span></code>, thus e.g. for
camouflaged octopus clustering one might want to change this.</p>
</dd>
<dt><strong>crop</strong><span class="classifier">bool or str, optional</span></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, video frames are cropped according to the corresponding
coordinates stored in the project configuration file. Alternatively, if
cropping coordinates are not known yet, crop=``”GUI”`` triggers a user
interface where the cropping area can be manually drawn and saved.</p>
</dd>
<dt><strong>userfeedback: bool, optional</strong></dt><dd><p>If this is set to <code class="docutils literal notranslate"><span class="pre">False</span></code> during <code class="docutils literal notranslate"><span class="pre">&quot;automatic&quot;</span></code> mode then frames for all
videos are extracted. The user can set this to <code class="docutils literal notranslate"><span class="pre">&quot;True&quot;</span></code>, which will result in
a dialog, where the user is asked for each video if (additional/any) frames
from this video should be extracted. Use this, e.g. if you have already labeled
some folders and want to extract data for new videos.</p>
</dd>
<dt><strong>cluster_resizewidth: int, default: 30</strong></dt><dd><p>For <code class="docutils literal notranslate"><span class="pre">&quot;k-means&quot;</span></code> one can change the width to which the images are downsampled
(aspect ratio is fixed).</p>
</dd>
<dt><strong>cluster_step: int, default: 1</strong></dt><dd><p>By default each frame is used for clustering, but for long videos one could
only use every nth frame (set using this parameter). This saves memory before
clustering can start, however, reading the individual frames takes longer due
to the skipping.</p>
</dd>
<dt><strong>cluster_color: bool, default: False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">&quot;False&quot;</span></code> then each downsampled image is treated as a grayscale vector
(discarding color information). If <code class="docutils literal notranslate"><span class="pre">&quot;True&quot;</span></code>, then the color channels are
considered. This increases the computational complexity.</p>
</dd>
<dt><strong>opencv: bool, default: True</strong></dt><dd><p>Uses openCV for loading &amp; extractiong (otherwise moviepy (legacy)).</p>
</dd>
<dt><strong>slider_width: int, default: 25</strong></dt><dd><p>Width of the video frames slider, in percent of window.</p>
</dd>
<dt><strong>config3d: string, optional</strong></dt><dd><p>Path to the project configuration file in the 3D project. This will be used to
match frames extracted from all cameras present in the field ‘camera_names’ to
the frames extracted from the camera given by the parameter ‘extracted_cam’.</p>
</dd>
<dt><strong>extracted_cam: int, default: 0</strong></dt><dd><p>The index of the camera that already has extracted frames. This will match
frame numbers to extract for all other cameras. This parameter is necessary if
you wish to use epipolar lines in the labeling toolbox. Only use if
<code class="docutils literal notranslate"><span class="pre">mode='match'</span></code> and <code class="docutils literal notranslate"><span class="pre">config3d</span></code> is provided.</p>
</dd>
<dt><strong>videos_list: list[str], Default: None</strong></dt><dd><p>A list of the string containing full paths to videos to extract frames for. If
this is left as <code class="docutils literal notranslate"><span class="pre">None</span></code> all videos specified in the config file will have
frames extracted. Otherwise one can select a subset by passing those paths.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Use the function <code class="docutils literal notranslate"><span class="pre">add_new_videos</span></code> at any stage of the project to add new videos
to the config file and extract their frames.</p>
<p>The following parameters for automatic extraction are used from the config file</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">numframes2pick</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">start</span></code> and <code class="docutils literal notranslate"><span class="pre">stop</span></code></p></li>
</ul>
<p>While selecting the frames manually, you do not need to specify the <code class="docutils literal notranslate"><span class="pre">crop</span></code>
parameter in the command. Rather, you will get a prompt in the graphic user
interface to choose if you need to crop or not.</p>
<p class="rubric">Examples</p>
<p>To extract frames automatically with ‘kmeans’ and then crop the frames</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        config=&#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        mode=&#39;automatic&#39;,</span>
<span class="go">        algo=&#39;kmeans&#39;,</span>
<span class="go">        crop=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To extract frames automatically with ‘kmeans’ and then defining the cropping area
using a GUI</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        &#39;automatic&#39;,</span>
<span class="go">        &#39;kmeans&#39;,</span>
<span class="go">        &#39;GUI&#39;,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To consider the color information when extracting frames automatically with
‘kmeans’</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        &#39;automatic&#39;,</span>
<span class="go">        &#39;kmeans&#39;,</span>
<span class="go">        cluster_color=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To extract frames automatically with ‘uniform’ and then crop the frames</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        &#39;automatic&#39;,</span>
<span class="go">        &#39;uniform&#39;,</span>
<span class="go">        crop=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To extract frames manually</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;, &#39;manual&#39;</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To extract frames manually, with a 60% wide frames slider</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;, &#39;manual&#39;, slider_width=60,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To extract frames from a second camera that match the frames extracted from the
first</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_frames</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        mode=&#39;match&#39;,</span>
<span class="go">        extracted_cam=0,</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

</div>
</section>
<section id="d-label-frames">
<h3>(D) Label Frames<a class="headerlink" href="#d-label-frames" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">label_frames</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
<p>The toolbox provides a function <strong>label_frames</strong> which helps the user to easily label
all the extracted frames using an interactive graphical user interface (GUI). The user
should have already named the bodyparts to label (points of interest) in the
project’s configuration file by providing a list. The following command invokes the
napari-deeplabcut labelling GUI.</p>
<p><a class="reference external" href="https://youtu.be/hsA9IB5r73E">🎥 DEMO</a></p>
<p>HOT KEYS IN THE Labeling GUI (also see “help” in GUI):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Ctrl</span> <span class="o">+</span> <span class="n">C</span><span class="p">:</span> <span class="n">Copy</span> <span class="n">labels</span> <span class="kn">from</span><span class="w"> </span><span class="nn">previous</span> <span class="n">frame</span><span class="o">.</span>
<span class="n">Keyboard</span> <span class="n">arrows</span><span class="p">:</span> <span class="n">advance</span> <span class="n">frames</span><span class="o">.</span>
<span class="n">Delete</span> <span class="n">key</span><span class="p">:</span> <span class="n">delete</span> <span class="n">label</span><span class="o">.</span>
</pre></div>
</div>
<p><img alt="hot keys" src="https://images.squarespace-cdn.com/content/v1/57f6d51c9f74566f55ecf271/192345a5-e411-4d56-b718-ef52f91e195e/Qwerty.png?format=2500w" /></p>
<p><strong>CRITICAL POINT:</strong> It is advisable to <strong>consistently label similar spots</strong> (e.g., on a
wrist that is very large, try to label the same location). In general, invisible or
occluded points should not be labeled by the user, unless you want to teach the network
to “guess” - this is possible, but could affect accuracy. If you don’t want/or don’t see
a bodypart, they can simply be skipped by not applying the label anywhere on the frame.</p>
<p>OPTIONAL: In the event of adding more labels to the existing labeled dataset, the user
needs to append the new labels to the bodyparts in the config.yaml file. Thereafter, the
user can call the function <strong>label_frames</strong>. A box will pop up and ask the user if they
wish to display all parts, or only add in the new labels. Saving the labels after all
the images are labelled will append the new labels to the existing labeled dataset.</p>
<p><strong>maDeepLabCut CRITICAL POINT:</strong> For multi-animal labeling, unless you can tell apart
the animals, you do not need to worry about the “ID” of each animal. For example: if you
have a white and black mouse label the white mouse as animal 1, and black as animal 2
across all frames. If two black mice, then the ID label 1 or 2 can switch between
frames - no need for you to try to identify them (but always label consistently within a
frame). If you have 2 black mice but one always has an optical fiber (for example), then
DO label them consistently as animal1 and animal_fiber (for example). The point of
multi-animal DLC is to train models that can first group the correct bodyparts to
individuals, then associate those points in a given video to a specific individual,
which then also uses temporal information to link across the video frames.</p>
<p>Note, we also highly recommend that you use more bodyparts that you might otherwise have
(see the example below).</p>
<p>For more information, checkout the <a class="reference internal" href="gui/napari_GUI.html#napari-gui"><span class="std std-ref">napari-deeplabcut docs</span></a> for
more information about the labelling workflow.</p>
</section>
<section id="e-check-annotated-frames">
<h3>(E) Check Annotated Frames<a class="headerlink" href="#e-check-annotated-frames" title="Link to this heading">#</a></h3>
<p>Checking if the labels were created and stored correctly is beneficial for training, since labeling
is one of the most critical parts for creating the training dataset. The DeepLabCut toolbox provides a function
<code class="docutils literal notranslate"><span class="pre">check_labels</span></code> to do so. It is used as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">check_labels</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">visualizeindividuals</span><span class="o">=</span><span class="kc">True</span><span class="o">/</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>maDeepLabCut:</strong> you can check and plot colors per individual or per body part, just set the flag <code class="docutils literal notranslate"><span class="pre">visualizeindividuals=True/False</span></code>. Note, you can run this twice in both states to see both images.</p>
<p align="center">
<img src="https://images.squarespace-cdn.com/content/v1/57f6d51c9f74566f55ecf271/1586203062876-D9ZL5Q7NZ464FUQN95NA/ke17ZwdGBToddI8pDm48kKmw982fUOZVIQXHUCR1F55Zw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpx7krGdD6VO1HGZR3BdeCbrijc_yIxzfnirMo-szZRSL5-VIQGAVcQr6HuuQP1evvE/img1068_individuals.png?format=750w" width="50%">
</p>
<p>For each video directory in labeled-data this function creates a subdirectory with <strong>labeled</strong> as a suffix. Those directories contain the frames plotted with the annotated body parts. The user can double check if the body parts are labeled correctly. If they are not correct, the user can reload the frames (i.e. <code class="docutils literal notranslate"><span class="pre">deeplabcut.label_frames</span></code>), move them around, and click save again.</p>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.generate_training_dataset.trainingsetmanipulation.check_labels">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.generate_training_dataset.trainingsetmanipulation.</span></span><span class="sig-name descname"><span class="pre">check_labels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Labels</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['+',</span> <span class="pre">'.',</span> <span class="pre">'x']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">scale</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dpi</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_skeleton</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">visualizeindividuals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.check_labels" title="Link to this definition">#</a></dt>
<dd><p>Check the labeled frames.</p>
<p>Double check if the labels were at the correct locations and stored in the proper
file format.</p>
<p>This creates a new subdirectory for each video under the ‘labeled-data’ and all the
frames are plotted with the labels.</p>
<p>Make sure that these labels are fine.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the config.yaml file as a string.</p>
</dd>
<dt><strong>Labels: list, default=’+’</strong></dt><dd><p>List of at least 3 matplotlib markers. The first one will be used to indicate
the human ground truth location (Default: +)</p>
</dd>
<dt><strong>scale</strong><span class="classifier">float, default=1</span></dt><dd><p>Change the relative size of the output images.</p>
</dd>
<dt><strong>dpi</strong><span class="classifier">int, optional, default=100</span></dt><dd><p>Output resolution in dpi.</p>
</dd>
<dt><strong>draw_skeleton: bool, default=True</strong></dt><dd><p>Plot skeleton overlaid over body parts.</p>
</dd>
<dt><strong>visualizeindividuals: bool, default: True.</strong></dt><dd><p>For a multianimal project, if True, the different individuals have different
colors (and all bodyparts the same). If False, the colors change over bodyparts
rather than individuals.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">check_labels</span><span class="p">(</span><span class="s1">&#39;/analysis/project/reaching-task/config.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
</dd></dl>

</div>
</section>
<section id="f-create-training-dataset">
<h3>(F) Create Training Dataset<a class="headerlink" href="#f-create-training-dataset" title="Link to this heading">#</a></h3>
<p>At this point, you’ll need to select your neural network type.</p>
<p>For the <strong>PyTorch engine</strong>, please see <a class="reference internal" href="pytorch/architectures.html#dlc3-architectures"><span class="std std-ref">the PyTorch Model Architectures</span></a> for options.</p>
<p>For the <strong>TensorFlow engine</strong>, please see Lauer et al. 2021 for options. Multi-animal
models will use <code class="docutils literal notranslate"><span class="pre">imgaug</span></code>, ADAM optimization, our new DLCRNet, and batch training. We
suggest keeping these defaults at this time. At this step, the ImageNet pre-trained
networks (i.e. ResNet-50) weights will be downloaded. If they do not download (you will
see this downloading in the terminal, then you may not have permission to do so (
something we have seen with some Windows users - see the <strong><a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/wiki/Troubleshooting-Tips">
WIKI troubleshooting for more help!</a></strong>).</p>
<p>Then run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_dataset</span><span class="p">(</span><span class="n">config_path</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p>The set of arguments in the function will shuffle the combined labeled dataset and split it to create train and test
sets. The subdirectory with suffix <code class="docutils literal notranslate"><span class="pre">iteration#</span></code> under the directory <strong>training-datasets</strong> stores the dataset and meta
information, where the <code class="docutils literal notranslate"><span class="pre">#</span></code> is the value of <code class="docutils literal notranslate"><span class="pre">iteration</span></code> variable stored in the project’s configuration file (this number
keeps track of how often the dataset was refined).</p></li>
<li><p>OPTIONAL: If the user wishes to benchmark the performance of the DeepLabCut, they can create multiple
training datasets by specifying an integer value to the <code class="docutils literal notranslate"><span class="pre">num_shuffles</span></code>; see the docstring for more details.</p></li>
<li><p>Each iteration of the creation of a training dataset will create several files, which
is used by the feature detectors, and a <code class="docutils literal notranslate"><span class="pre">.pickle</span></code> file that contains the meta
information about the training dataset. This also creates two subdirectories within
<strong>dlc-models-pytorch</strong> (<strong>dlc-models</strong> for the TensorFlow engine) called <code class="docutils literal notranslate"><span class="pre">test</span></code> and
<code class="docutils literal notranslate"><span class="pre">train</span></code>, and these each have a configuration file called pose_cfg.yaml. Specifically,
the user can edit the <strong>pytorch_config.yaml</strong> (<strong>pose_cfg.yaml</strong> for TensorFlow engine)
within the <strong>train</strong> subdirectory before starting the training. These configuration
files contain meta information with regard to the parameters of the feature detectors.
Key parameters are listed in Box 2.</p></li>
</ul>
<p><strong>DATA AUGMENTATION:</strong> At this stage you can also decide what type of augmentation to
use. Once you’ve called <code class="docutils literal notranslate"><span class="pre">create_training_dataset</span></code>, you can edit the
<a class="reference internal" href="pytorch/pytorch_config.html#dlc3-pytorch-config"><span class="std std-ref"><strong>pytorch_config.yaml</strong></span></a> file that was created (or for the
TensorFlow engine, the <a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/blob/master/deeplabcut/pose_cfg.yaml"><strong>pose_cfg.yaml</strong></a> file).</p>
<ul class="simple">
<li><p>PyTorch Engine: <a class="reference external" href="https://albumentations.ai/docs/">Albumentations</a> is used for data
augmentation. Look at the <a class="reference internal" href="pytorch/pytorch_config.html#dlc3-pytorch-config"><span class="std std-ref"><strong>pytorch_config.yaml</strong></span></a> for more
information about image augmentation options.</p></li>
<li><p>TensorFlow Engine: The default augmentation works well for most tasks (as shown on
<a class="reference external" href="http://www.deeplabcut.org">www.deeplabcut.org</a>), but there are many options, more data augmentation, intermediate
supervision, etc. Only <code class="docutils literal notranslate"><span class="pre">imgaug</span></code> augmentation is available for multi-animal projects.</p></li>
</ul>
<p><a class="reference external" href="https://www.cell.com/neuron/pdf/S0896-6273(20)30717-0.pdf">A Primer on Motion Capture with Deep Learning: Principles, Pitfalls, and Perspectives</a>, details the advantage of
augmentation for a worked example (see Fig 8). TL;DR: use imgaug and use the symmetries
of your data!</p>
<p>Importantly, image cropping as previously done with <code class="docutils literal notranslate"><span class="pre">deeplabcut.cropimagesandlabels</span></code> in multi-animal projects
is now part of the augmentation pipeline. In other words, image crops are no longer stored in labeled-data/…_cropped
folders. Crop size still defaults to (400, 400); if your images are very large (e.g. 2k, 4k pixels), consider increasing the crop size, but be aware unless you have a strong GPU (24 GB memory or more), you will hit memory errors. You can lower the batch size, but this may affect performance.</p>
<p>In addition, one can specify a crop sampling strategy: crop centers can either be taken at random over the image (<code class="docutils literal notranslate"><span class="pre">uniform</span></code>) or the annotated keypoints (<code class="docutils literal notranslate"><span class="pre">keypoints</span></code>); with a focus on regions of the scene with high body part density (<code class="docutils literal notranslate"><span class="pre">density</span></code>); last, combining <code class="docutils literal notranslate"><span class="pre">uniform</span></code> and <code class="docutils literal notranslate"><span class="pre">density</span></code> for a <code class="docutils literal notranslate"><span class="pre">hybrid</span></code> balanced strategy (this is the default strategy). Note that both parameters can be easily edited prior to training in the <strong>pose_cfg.yaml</strong> configuration file.
As a reminder, cropping images into smaller patches is a form of data augmentation that simultaneously
allows the use of batch processing even on small GPUs that could not otherwise accommodate larger images + larger batchsizes (this usually increases performance and decreasing training time).</p>
<p><strong>MODEL COMPARISON</strong>: You can also test several models by creating the same train/test
split for different networks.
You can easily do this in the Project Manager GUI (by selecting the “Use an existing
data split” option), which also lets you compare PyTorch and TensorFlow models.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.0: </span>You can now create new shuffles using the same train/test split as
existing shuffles with <code class="docutils literal notranslate"><span class="pre">create_training_dataset_from_existing_split</span></code>. This allows you to
compare model performance (between different architectures or when using different
training hyper-parameters) as the shuffles were trained on the same data, and evaluated
on the same test data!</p>
<p>Example usage - creating 3 new shuffles (with indices 10, 11 and 12) for a ResNet 50
pose estimation model, using the same data split as was used for shuffle 0:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_dataset_from_existing_split</span><span class="p">(</span>
    <span class="n">config_path</span><span class="p">,</span>
    <span class="n">from_shuffle</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">shuffles</span><span class="o">=</span><span class="p">[</span><span class="mi">10</span><span class="p">,</span> <span class="mi">11</span><span class="p">,</span> <span class="mi">12</span><span class="p">],</span>
    <span class="n">net_type</span><span class="o">=</span><span class="s2">&quot;resnet_50&quot;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for deeplabcut.create_training_dataset</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.generate_training_dataset.trainingsetmanipulation.</span></span><span class="sig-name descname"><span class="pre">create_training_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_shuffles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Shuffles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windows2linux</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">userfeedback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainIndices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">testIndices</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmenter_type</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posecfg_template</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superanimal_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">WeightInitialization</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctd_conditions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset" title="Link to this definition">#</a></dt>
<dd><p>Creates a training dataset.</p>
<p>Labels from all the extracted frames are merged into a single .h5 file.
Only the videos included in the config file are used to create this dataset.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file as a string.</p>
</dd>
<dt><strong>num_shuffles</strong><span class="classifier">int, optional, default=1</span></dt><dd><p>Number of shuffles of training dataset to create, i.e. <code class="docutils literal notranslate"><span class="pre">[1,2,3]</span></code> for
<code class="docutils literal notranslate"><span class="pre">num_shuffles=3</span></code>.</p>
</dd>
<dt><strong>Shuffles: list[int], optional</strong></dt><dd><p>Alternatively the user can also give a list of shuffles.</p>
</dd>
<dt><strong>userfeedback: bool, optional, default=True</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>, all requested train/test splits are created (no matter if they
already exist). If you want to assure that previous splits etc. are not
overwritten, set this to <code class="docutils literal notranslate"><span class="pre">True</span></code> and you will be asked for each split.</p>
</dd>
<dt><strong>trainIndices: list of lists, optional, default=None</strong></dt><dd><p>List of one or multiple lists containing train indexes.
A list containing two lists of training indexes will produce two splits.</p>
</dd>
<dt><strong>testIndices: list of lists, optional, default=None</strong></dt><dd><p>List of one or multiple lists containing test indexes.</p>
</dd>
<dt><strong>net_type: list, optional, default=None</strong></dt><dd><p>Type of networks. The options available depend on which engine is used.
Currently supported options are:</p>
<blockquote>
<div><dl class="simple">
<dt>TensorFlow</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_50</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_101</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_152</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_1.0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_0.75</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_0.5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_0.35</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b4</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b6</span></code></p></li>
</ul>
</dd>
</dl>
<p>PyTorch (call <code class="docutils literal notranslate"><span class="pre">deeplabcut.pose_estimation_pytorch.available_models()</span></code> for
a complete list)</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">animaltokenpose_base</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cspnext_m</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cspnext_s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cspnext_x</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_coam_w32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_coam_w48</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_cspnext_m</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_cspnext_x</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_rtmpose_x_human</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_hrnet_w32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_hrnet_w48</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_rtmpose_m</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_rtmpose_x</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ctd_prenet_rtmpose_x_human</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dekr_w18</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dekr_w32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dekr_w48</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dlcrnet_stride16_ms5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dlcrnet_stride32_ms5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hrnet_w18</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hrnet_w32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hrnet_w48</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_101</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_50</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rtmpose_m</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rtmpose_s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">rtmpose_x</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_cspnext_m</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_cspnext_s</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_cspnext_x</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_hrnet_w18</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_hrnet_w32</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_hrnet_w48</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_resnet_101</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">top_down_resnet_50</span></code></p></li>
</ul>
</div></blockquote>
</div></blockquote>
</dd>
<dt><strong>detector_type: string, optional, default=None</strong></dt><dd><p>Only for the PyTorch engine.
When passing creating shuffles for top-down models, you can specify which
detector you want. If the detector_type is None, the <code class="docutils literal notranslate"><span class="pre">`ssdlite`</span></code> will be used.
The list of all available detectors can be obtained by calling
<code class="docutils literal notranslate"><span class="pre">deeplabcut.pose_estimation_pytorch.available_detectors()</span></code>. Supported options:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssdlite</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fasterrcnn_mobilenet_v3_large_fpn</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fasterrcnn_resnet50_fpn_v2</span></code></p></li>
</ul>
</div></blockquote>
</dd>
<dt><strong>augmenter_type: string, optional, default=None</strong></dt><dd><p>Type of augmenter. The options available depend on which engine is used.
Currently supported options are:</p>
<blockquote>
<div><dl class="simple">
<dt>TensorFlow</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scalecrop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">imgaug</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tensorpack</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deterministic</span></code></p></li>
</ul>
</dd>
<dt>PyTorch</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">albumentations</span></code></p></li>
</ul>
</dd>
</dl>
</div></blockquote>
</dd>
<dt><strong>posecfg_template: string, optional, default=None</strong></dt><dd><p>Only for the TensorFlow engine.
Path to a <code class="docutils literal notranslate"><span class="pre">pose_cfg.yaml</span></code> file to use as a template for generating the new
one for the current iteration. Useful if you would like to start with the same
parameters a previous training iteration. None uses the default
<code class="docutils literal notranslate"><span class="pre">pose_cfg.yaml</span></code>.</p>
</dd>
<dt><strong>superanimal_name: string, optional, default=””</strong></dt><dd><p>Only for the TensorFlow engine. For the PyTorch engine, use the <code class="docutils literal notranslate"><span class="pre">weight_init</span></code>
parameter.
Specify the superanimal name is transfer learning with superanimal is desired.
This makes sure the pose config template uses superanimal configs as template.</p>
</dd>
<dt><strong>weight_init: WeightInitialisation, optional, default=None</strong></dt><dd><p>PyTorch engine only. Specify how model weights should be initialized. The
default mode uses transfer learning from ImageNet weights.</p>
</dd>
<dt><strong>engine: Engine, optional</strong></dt><dd><p>Whether to create a pose config for a Tensorflow or PyTorch model. Defaults to
the value specified in the project configuration file. If no engine is specified
for the project, defaults to <code class="docutils literal notranslate"><span class="pre">deeplabcut.compat.DEFAULT_ENGINE</span></code>.</p>
</dd>
<dt><strong>ctd_conditions: int | str | Path | tuple[int, str] | tuple[int, int] | None, default = None,</strong></dt><dd><p>If using a conditional-top-down (CTD) net_type, this argument should be
specified. It defines the conditions that will be used with the CTD model.
It can be either:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="simple">
<dt>A shuffle number (ctd_conditions: int), which must correspond to a</dt><dd><p>bottom-up (BU) network type.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A predictions file path (ctd_conditions: string | Path), which must</dt><dd><p>correspond to a .json or .h5 predictions file.</p>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>A shuffle number and a particular snapshot</dt><dd><p>(ctd_conditions: tuple[int, str] | tuple[int, int]), which respectively
correspond to a bottom-up (BU) network type and a particular snapshot
name or index.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl>
<dt>list(tuple) or None</dt><dd><p>If training dataset was successfully created, a list of tuples is returned.
The first two elements in each tuple represent the training fraction and the
shuffle value. The last two elements in each tuple are arrays of integers
representing the training and test indices.</p>
<p>Returns None if training dataset could not be created.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Notes</p>
<p>Use the function <code class="docutils literal notranslate"><span class="pre">add_new_videos</span></code> at any stage of the project to add more videos
to the project.</p>
<p class="rubric">Examples</p>
<p>Linux/MacOS:
&gt;&gt;&gt; deeplabcut.create_training_dataset(</p>
<blockquote>
<div><blockquote>
<div><p>‘/analysis/project/reaching-task/config.yaml’, num_shuffles=1,</p>
</div></blockquote>
<p>)</p>
</div></blockquote>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_dataset</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;, Shuffles=[2], engine=deeplabcut.Engine.TF,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Windows:
&gt;&gt;&gt; deeplabcut.create_training_dataset(</p>
<blockquote>
<div><blockquote>
<div><p>‘C:UsersUlflooming-taskconfig.yaml’, Shuffles=[3,17,5],</p>
</div></blockquote>
<p>)</p>
</div></blockquote>
</dd></dl>

</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for deeplabcut.create_training_model_comparison</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_model_comparison">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.generate_training_dataset.trainingsetmanipulation.</span></span><span class="sig-name descname"><span class="pre">create_training_model_comparison</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainindex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_shuffles</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['resnet_50']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmenter_types</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">['imgaug']</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">userfeedback</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windows2linux</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_model_comparison" title="Link to this definition">#</a></dt>
<dd><p>Creates a training dataset to compare networks and augmentation types.</p>
<p>The datasets are created such that the shuffles have same training and testing
indices. Therefore, this function is useful for benchmarking the performance of
different network and augmentation types on the same training/testdata.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config: str</strong></dt><dd><p>Full path of the config.yaml file.</p>
</dd>
<dt><strong>trainindex: int, optional, default=0</strong></dt><dd><p>Either (in case uniform = True) indexes which element of TrainingFraction in
the config file should be used (note it is a list!).
Alternatively (uniform = False) indexes which folder is dropped, i.e. the first
if trainindex=0, the second if trainindex=1, etc.</p>
</dd>
<dt><strong>num_shuffles</strong><span class="classifier">int, optional, default=1</span></dt><dd><p>Number of shuffles of training dataset to create,
i.e. [1,2,3] for num_shuffles=3.</p>
</dd>
<dt><strong>net_types: list[str], optional, default=[“resnet_50”]</strong></dt><dd><p>Currently supported networks are</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;resnet_50&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;resnet_101&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;resnet_152&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mobilenet_v2_1.0&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mobilenet_v2_0.75&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mobilenet_v2_0.5&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;mobilenet_v2_0.35&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b0&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b1&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b2&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b3&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b4&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b5&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;efficientnet-b6&quot;</span></code></p></li>
</ul>
</dd>
<dt><strong>augmenter_types: list[str], optional, default=[“imgaug”]</strong></dt><dd><p>Currently supported augmenters are</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;default&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;imgaug&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;tensorpack&quot;</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&quot;deterministic&quot;</span></code></p></li>
</ul>
</dd>
<dt><strong>userfeedback: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>, then all requested train/test splits are created, no matter if
they already exist. If you want to assure that previous splits etc. are not
overwritten, then set this to True and you will be asked for each split.</p>
</dd>
<dt><strong>windows2linux</strong></dt><dd><dl class="simple">
<dt>..deprecated::</dt><dd><p>Has no effect since 2.2.0.4 and will be removed in 2.2.1.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>shuffle_list: list</dt><dd><p>List of indices corresponding to the trainingsplits/models that were created.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>On Linux/MacOS</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">shuffle_list</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_model_comparison</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        num_shuffles=1,</span>
<span class="go">        net_types=[&#39;resnet_50&#39;,&#39;resnet_152&#39;],</span>
<span class="go">        augmenter_types=[&#39;tensorpack&#39;,&#39;deterministic&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>On Windows</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">shuffle_list</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_training_model_comparison</span><span class="p">(</span>
<span class="go">        &#39;C:\Users\Ulf\looming-task\config.yaml&#39;,</span>
<span class="go">        num_shuffles=1,</span>
<span class="go">        net_types=[&#39;resnet_50&#39;,&#39;resnet_152&#39;],</span>
<span class="go">        augmenter_types=[&#39;tensorpack&#39;,&#39;deterministic&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>See <code class="docutils literal notranslate"><span class="pre">examples/testscript_openfielddata_augmentationcomparison.py</span></code> for an example
of how to use <code class="docutils literal notranslate"><span class="pre">shuffle_list</span></code>.</p>
</dd></dl>

</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for deeplabcut.create_training_dataset_from_existing_split</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset_from_existing_split">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.generate_training_dataset.trainingsetmanipulation.</span></span><span class="sig-name descname"><span class="pre">create_training_dataset_from_existing_split</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_shuffle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">from_trainsetindex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_shuffles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">userfeedback</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">net_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">augmenter_type</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ctd_conditions</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">posecfg_template</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superanimal_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_init</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">WeightInitialization</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> <span class="sig-return"><span class="sig-return-icon">&#x2192;</span> <span class="sig-return-typehint"><span class="pre">None</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span></span><a class="headerlink" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset_from_existing_split" title="Link to this definition">#</a></dt>
<dd><p>Labels from all the extracted frames are merged into a single .h5 file.
Only the videos included in the config file are used to create this dataset.</p>
<dl>
<dt>Args:</dt><dd><p>config: Full path of the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file as a string.</p>
<p>from_shuffle: The index of the shuffle from which to copy the train/test split.</p>
<dl>
<dt>from_trainsetindex: The trainset index of the shuffle from which to use the data</dt><dd><p>split. Default is 0.</p>
</dd>
<dt>num_shuffles: Number of shuffles of training dataset to create, used if</dt><dd><p><code class="docutils literal notranslate"><span class="pre">shuffles</span></code> is None.</p>
</dd>
<dt>shuffles: If defined, <code class="docutils literal notranslate"><span class="pre">num_shuffles</span></code> is ignored and a shuffle is created for</dt><dd><p>each index given in the list.</p>
</dd>
<dt>userfeedback: If <code class="docutils literal notranslate"><span class="pre">False</span></code>, all requested train/test splits are created (no</dt><dd><p>matter if they already exist). If you want to assure that previous splits
etc. are not overwritten, set this to <code class="docutils literal notranslate"><span class="pre">True</span></code> and you will be asked for
each existing split if you want to overwrite it.</p>
</dd>
<dt>net_type: The type of network to create the shuffle for. Currently supported</dt><dd><dl class="simple">
<dt>options for engine=Engine.TF are:</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_50</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_101</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">resnet_152</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_1.0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_0.75</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_0.5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">mobilenet_v2_0.35</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b0</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b1</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b2</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b3</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b4</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b5</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">efficientnet-b6</span></code></p></li>
</ul>
</dd>
</dl>
<p>Currently supported  options for engine=Engine.TF can be obtained by calling
<code class="docutils literal notranslate"><span class="pre">deeplabcut.pose_estimation_pytorch.available_models()</span></code>.</p>
</dd>
<dt>detector_type: string, optional, default=None</dt><dd><p>Only for the PyTorch engine.
When passing creating shuffles for top-down models, you can specify which
detector you want. If the detector_type is None, the <code class="docutils literal notranslate"><span class="pre">`ssdlite`</span></code> will be
used. The list of all available detectors can be obtained by calling
<code class="docutils literal notranslate"><span class="pre">deeplabcut.pose_estimation_pytorch.available_detectors()</span></code>. Supported
options:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">ssdlite</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fasterrcnn_mobilenet_v3_large_fpn</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">fasterrcnn_resnet50_fpn_v2</span></code></p></li>
</ul>
</div></blockquote>
</dd>
<dt>augmenter_type: Type of augmenter. Currently supported augmenters for</dt><dd><dl class="simple">
<dt>engine=Engine.TF are</dt><dd><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scalecrop</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">imgaug</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tensorpack</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">deterministic</span></code></p></li>
</ul>
</dd>
</dl>
<p>The only supported augmenter for Engine.PYTORCH is <code class="docutils literal notranslate"><span class="pre">albumentations</span></code>.</p>
</dd>
<dt>posecfg_template: Only for Engine.TF. Path to a <code class="docutils literal notranslate"><span class="pre">pose_cfg.yaml</span></code> file to use as</dt><dd><p>a template for generating the new one for the current iteration. Useful if
you would like to start with the same parameters a previous training
iteration. None uses the default <code class="docutils literal notranslate"><span class="pre">pose_cfg.yaml</span></code>.</p>
</dd>
<dt>superanimal_name: Specify the superanimal name is transfer learning with</dt><dd><p>superanimal is desired. This makes sure the pose config template uses
superanimal configs as template.</p>
</dd>
<dt>weight_init: Only for Engine.PYTORCH. Specify how model weights should be</dt><dd><p>initialized. The default mode uses transfer learning from ImageNet weights.</p>
</dd>
<dt>engine: Whether to create a pose config for a Tensorflow or PyTorch model.</dt><dd><p>Defaults to the value specified in the project configuration file. If no
engine is specified for the project, defaults to
<code class="docutils literal notranslate"><span class="pre">deeplabcut.compat.DEFAULT_ENGINE</span></code>.</p>
</dd>
<dt>ctd_conditions: int | str | Path | tuple[int, str] | tuple[int, int] | None, default = None,</dt><dd><p>If using a conditional-top-down (CTD) net_type, this argument should be
specified. It defines the conditions that will be used with the CTD model.
It can be either:</p>
<blockquote>
<div><ul class="simple">
<li><p>A shuffle number (ctd_conditions: int), which must correspond to a
bottom-up (BU) network type.</p></li>
<li><p>A predictions file path (ctd_conditions: string | Path), which must
correspond to a .json or .h5 predictions file.</p></li>
<li><p>A shuffle number and a particular snapshot
(ctd_conditions: tuple[int, str] | tuple[int, int]), which
respectively correspond to a bottom-up (BU) network type and a
particular snapshot name or index.</p></li>
</ul>
</div></blockquote>
</dd>
</dl>
</dd>
<dt>Returns:</dt><dd><p>If training dataset was successfully created, a list of tuples is returned.
The first two elements in each tuple represent the training fraction and the
shuffle value. The last two elements in each tuple are arrays of integers
representing the training and test indices.</p>
<p>Returns None if training dataset could not be created.</p>
</dd>
<dt>Raises:</dt><dd><p>ValueError: If the shuffle from which to copy the data split doesn’t exist.</p>
</dd>
</dl>
</dd></dl>

</div>
</section>
<section id="g-train-the-network">
<h3>(G) Train The Network<a class="headerlink" href="#g-train-the-network" title="Link to this heading">#</a></h3>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The set of arguments in the function starts training the network for the dataset created
for one specific shuffle. Note that you can change training parameters in the
<a class="reference internal" href="pytorch/pytorch_config.html#dlc3-pytorch-config"><span class="std std-ref"><strong>pytorch_config.yaml</strong></span></a> file (or <strong>pose_cfg.yaml</strong> for TensorFlow
models) of the model that you want to train (before you start training).</p>
<p>At user specified iterations during training checkpoints are stored in the subdirectory
<em>train</em> under the respective iteration &amp; shuffle directory.</p>
<div class="dropdown admonition">
<p class="admonition-title">Tips on training models with the PyTorch Engine</p>
<p>Example parameters that one can call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span>
    <span class="n">config_path</span><span class="p">,</span>
    <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">trainingsetindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">device</span><span class="o">=</span><span class="s2">&quot;cuda:0&quot;</span><span class="p">,</span>
    <span class="n">max_snapshots_to_keep</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">displayiters</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">save_epochs</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">epochs</span><span class="o">=</span><span class="mi">200</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Pytorch models in DeepLabCut 3.0 are trained for a set number of epochs, instead of a
maximum number of iterations (which is what was used for TensorFlow models). An epoch
is a single pass through the training dataset, which means your model has seen each
training image exactly once. So if you have 64 training images for your network, an
epoch is 64 iterations with batch size 1 (or 32 iterations with batch size 2, 16 with
batch size 4, etc.).</p>
<p>By default, the pretrained networks are not in the DeepLabCut toolbox (as they can be
more than 100MB), but they get downloaded automatically before you train.</p>
<p>If the user wishes to restart the training at a specific checkpoint they can specify the
full path of the checkpoint to the variable <code class="docutils literal notranslate"><span class="pre">resume_training_from</span></code> in the <a class="reference internal" href="pytorch/pytorch_config.html#dlc3-pytorch-config"><span class="std std-ref">
<strong>pytorch_config.yaml</strong></span></a> file (checkout the “Restarting Training at a Specific Checkpoint”
section of the docs) under the <em>train</em> subdirectory.</p>
<p><strong>CRITICAL POINT:</strong> It is recommended to train the networks <strong>until the loss plateaus</strong>
(depending on the dataset, model architecture and training hyper-parameters this happens
after 100 to 250 epochs of training).</p>
<p>The variables <code class="docutils literal notranslate"><span class="pre">display_iters</span></code> and <code class="docutils literal notranslate"><span class="pre">save_epochs</span></code> in the <a class="reference internal" href="pytorch/pytorch_config.html#dlc3-pytorch-config"><span class="std std-ref"><strong>pytorch_config.yaml</strong></span></a> file allows the user to alter how often the loss is displayed
and how often the weights are stored. We suggest saving every 5 to 25 epochs.</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Tips on training models with the TensorFlow Engine</p>
<p>Example parameters that one can call:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span>
    <span class="n">config_path</span><span class="p">,</span>
    <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">trainingsetindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">gputouse</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_snapshots_to_keep</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">autotune</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">displayiters</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span>
    <span class="n">saveiters</span><span class="o">=</span><span class="mi">15000</span><span class="p">,</span>
    <span class="n">maxiters</span><span class="o">=</span><span class="mi">30000</span><span class="p">,</span>
    <span class="n">allow_growth</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>By default, the pretrained networks are not in the DeepLabCut toolbox (as they are
around 100MB each), but they get downloaded before you train. However, if not previously
downloaded from the TensorFlow model weights, it will be downloaded and stored in a
subdirectory <em>pre-trained</em> under the subdirectory <em>models</em> in
<em>Pose_Estimation_Tensorflow</em>. At user specified iterations during training checkpoints
are stored in the subdirectory <em>train</em> under the respective iteration directory.</p>
<p>If the user wishes to restart the training at a specific checkpoint they can specify the
full path of the checkpoint to the variable <code class="docutils literal notranslate"><span class="pre">init_weights</span></code> in the <strong>pose_cfg.yaml</strong>
file under the <em>train</em> subdirectory (see Box 2).</p>
<p><strong>CRITICAL POINT:</strong> It is recommended to train the networks for thousands of iterations
until the loss plateaus (typically around <strong>500,000</strong>) if you use batch size 1, and
<strong>50-100K</strong> if you use batchsize 8 (the default).</p>
<p>If you use <strong>maDeepLabCut</strong> the recommended training iterations is <strong>20K-100K</strong>
(it automatically stops at 200K!), as we use Adam and batchsize 8; if you have to reduce
the batchsize for memory reasons then the number of iterations needs to be increased.</p>
<p>The variables <code class="docutils literal notranslate"><span class="pre">display_iters</span></code> and <code class="docutils literal notranslate"><span class="pre">save_iters</span></code> in the <strong>pose_cfg.yaml</strong> file allows
the user to alter how often the loss is displayed and how often the weights are stored.</p>
<p><strong>maDeepLabCut CRITICAL POINT:</strong> For multi-animal projects we are using not only
different and new output layers, but also new data augmentation, optimization, learning
rates, and batch training defaults. Thus, please use a lower <code class="docutils literal notranslate"><span class="pre">save_iters</span></code> and
<code class="docutils literal notranslate"><span class="pre">maxiters</span></code>. I.e. we suggest saving every 10K-15K iterations, and only training until
50K-100K iterations. We recommend you look closely at the loss to not overfit on your
data. The bonus, training time is much less!!!</p>
</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for train_network</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.compat.train_network">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.compat.</span></span><span class="sig-name descname"><span class="pre">train_network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_snapshots_to_keep</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displayiters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">saveiters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">maxiters</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">epochs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_epochs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_growth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gputouse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">autotune</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keepdeconvweights</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superanimal_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superanimal_transfer_learning</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">device</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snapshot_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_path</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_batch_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_epochs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">detector_save_epochs</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pose_threshold</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pytorch_cfg_updates</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.compat.train_network" title="Link to this definition">#</a></dt>
<dd><p>Trains the network with the labels in the training dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the config.yaml file as a string.</p>
</dd>
<dt><strong>shuffle: int, optional, default=1</strong></dt><dd><p>Integer value specifying the shuffle index to select for training.</p>
</dd>
<dt><strong>trainingsetindex: int, optional, default=0</strong></dt><dd><p>Integer specifying which TrainingsetFraction to use.
Note that TrainingFraction is a list in config.yaml.</p>
</dd>
<dt><strong>max_snapshots_to_keep: int or None</strong></dt><dd><p>Sets how many snapshots are kept, i.e. states of the trained network. Every
saving iteration many times a snapshot is stored, however only the last
<code class="docutils literal notranslate"><span class="pre">max_snapshots_to_keep</span></code> many are kept! If you change this to None, then all
are kept.
See: <a class="github reference external" href="https://github.com/DeepLabCut/DeepLabCut/issues/8#issuecomment-387404835">DeepLabCut/DeepLabCut#8</a></p>
</dd>
<dt><strong>displayiters: optional, default=None</strong></dt><dd><p>This variable is actually set in <code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code>. However, you can
overwrite it with this hack. Don’t use this regularly, just if you are too lazy
to dig out the <code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code> file for the corresponding project. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the value from there is used, otherwise it is overwritten!</p>
</dd>
<dt><strong>saveiters: optional, default=None</strong></dt><dd><p>Only for the TensorFlow engine (for the PyTorch engine see the <code class="docutils literal notranslate"><span class="pre">torch_kwargs</span></code>:
you can use <code class="docutils literal notranslate"><span class="pre">save_epochs</span></code>).
This variable is actually set in <code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code>. However, you can
overwrite it with this hack. Don’t use this regularly, just if you are too lazy
to dig out the <code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code> file for the corresponding project.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the value from there is used, otherwise it is overwritten!</p>
</dd>
<dt><strong>maxiters: optional, default=None</strong></dt><dd><p>Only for the TensorFlow engine (for the PyTorch engine see the <code class="docutils literal notranslate"><span class="pre">torch_kwargs</span></code>:
you can use <code class="docutils literal notranslate"><span class="pre">epochs</span></code>).
This variable is actually set in <code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code>. However, you can
overwrite it with this hack. Don’t use this regularly, just if you are too lazy
to dig out the <code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code> file for the corresponding project.
If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the value from there is used, otherwise it is overwritten!</p>
</dd>
<dt><strong>epochs: optional, default=None</strong></dt><dd><p>Only for the PyTorch engine (equivalent to the <cite>maxiters</cite> parameter for the
TensorFlow engine). The maximum number of epochs to train the model for. If
None, the value will be read from the <cite>pytorch_config.yaml</cite> file. An epoch is a
single pass through the training dataset, which means your model has seen each
training image exactly once. So if you have 64 training images for your network,
an epoch is 64 iterations with batch size 1 (or 32 iterations with batch size 2,
16 with batch size 4, etc.).</p>
</dd>
<dt><strong>save_epochs: optional, default=None</strong></dt><dd><p>Only for the PyTorch engine (equivalent to the <cite>saveiters</cite> parameter for the
TensorFlow engine). The number of epochs between each snapshot save. If
None, the value will be read from the <cite>pytorch_config.yaml</cite> file.</p>
</dd>
<dt><strong>allow_growth: bool, optional, default=True.</strong></dt><dd><p>Only for the TensorFlow engine.
For some smaller GPUs the memory issues happen. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the memory
allocator does not pre-allocate the entire specified GPU memory region, instead
starting small and growing as needed.
See issue: <a class="reference external" href="https://forum.image.sc/t/how-to-stop-running-out-of-vram/30551/2">https://forum.image.sc/t/how-to-stop-running-out-of-vram/30551/2</a></p>
</dd>
<dt><strong>gputouse: optional, default=None</strong></dt><dd><p>Only for the TensorFlow engine (for the PyTorch engine see the <code class="docutils literal notranslate"><span class="pre">torch_kwargs</span></code>:
you can use <code class="docutils literal notranslate"><span class="pre">device</span></code>).
Natural number indicating the number of your GPU (see number in nvidia-smi).
If you do not have a GPU put None.
See: <a class="reference external" href="https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries">https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries</a></p>
</dd>
<dt><strong>autotune: bool, optional, default=False</strong></dt><dd><p>Only for the TensorFlow engine.
Property of TensorFlow, somehow faster if <code class="docutils literal notranslate"><span class="pre">False</span></code>
(as Eldar found out, see <a class="github reference external" href="https://github.com/tensorflow/tensorflow/issues/13317">tensorflow/tensorflow#13317</a>).</p>
</dd>
<dt><strong>keepdeconvweights: bool, optional, default=True</strong></dt><dd><p>Also restores the weights of the deconvolution layers (and the backbone) when
training from a snapshot. Note that if you change the number of bodyparts, you
need to set this to false for re-training.</p>
</dd>
<dt><strong>modelprefix: str, optional, default=””</strong></dt><dd><p>Directory containing the deeplabcut models to use when evaluating the network.
By default, the models are assumed to exist in the project folder.</p>
</dd>
<dt><strong>superanimal_name: str, optional, default =””</strong></dt><dd><p>Only for the TensorFlow engine. For the PyTorch engine, you need to specify
this through the <code class="docutils literal notranslate"><span class="pre">weight_init</span></code> when creating the training dataset.
Specified if transfer learning with superanimal is desired</p>
</dd>
<dt><strong>superanimal_transfer_learning: bool, optional, default = False.</strong></dt><dd><p>Only for the TensorFlow engine. For the PyTorch engine, you need to specify
this through the <code class="docutils literal notranslate"><span class="pre">weight_init</span></code> when creating the training dataset.
If set true, the training is transfer learning (new decoding layer). If set
false, and superanimal_name is True, then the training is fine-tuning (reusing
the decoding layer)</p>
</dd>
<dt><strong>engine: Engine, optional, default = None.</strong></dt><dd><p>The default behavior loads the engine for the shuffle from the metadata. You can
overwrite this by passing the engine as an argument, but this should generally
not be done.</p>
</dd>
<dt><strong>device: str, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The device to run the training on (e.g. “cuda:0”)</p>
</dd>
<dt><strong>snapshot_path: str or Path, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The path to the pose model snapshot to resume training from.</p>
</dd>
<dt><strong>detector_path: str or Path, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The path to the detector model snapshot to resume training from.</p>
</dd>
<dt><strong>batch_size: int, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The batch size to use while training.</p>
</dd>
<dt><strong>detector_batch_size: int, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The batch size to use while training the detector.</p>
</dd>
<dt><strong>detector_epochs: int, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The number of epochs to train the detector for.</p>
</dd>
<dt><strong>detector_save_epochs: int, optional, default = None.</strong></dt><dd><p>Only for the PyTorch engine. The number of epochs between each detector snapshot save.</p>
</dd>
<dt><strong>pose_threshold: float, optional, default = 0.1.</strong></dt><dd><dl class="simple">
<dt>Only for the PyTorch engine. Used for memory-replay. Pseudo-predictions with confidence lower</dt><dd><p>than this threshold are discarded for memory-replay</p>
</dd>
</dl>
</dd>
<dt><strong>pytorch_cfg_updates: dict, optional, default = None.</strong></dt><dd><p>A dictionary of updates to the pytorch config. The keys are the dot-separated
paths to the values to update in the config.
For example, to update the gpus to run the training on, you can use:
<code class="docutils literal notranslate"><span class="pre">`</span>
<span class="pre">pytorch_cfg_updates={&quot;runner.gpus&quot;:</span> <span class="pre">[0,1,2,3]}</span>
<span class="pre">`</span></code></p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>To train the network for first shuffle of the training dataset</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span><span class="s1">&#39;/analysis/project/reaching-task/config.yaml&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>To train the network for second shuffle of the training dataset</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        shuffle=2,</span>
<span class="go">        keepdeconvweights=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>To train the network for shuffle created with a PyTorch engine, while overriding the
number of epochs, batch size and other parameters.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">train_network</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        shuffle=1,</span>
<span class="go">        batch_size=8,</span>
<span class="go">        epochs=100,</span>
<span class="go">        save_epochs=10,</span>
<span class="go">        displayiters=50,</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

</div>
</section>
<section id="h-evaluate-the-trained-network">
<h3>(H) Evaluate the Trained Network<a class="headerlink" href="#h-evaluate-the-trained-network" title="Link to this heading">#</a></h3>
<p>It is important to evaluate the performance of the trained network. This performance is
measured by computing two metrics:</p>
<ul class="simple">
<li><p><strong>Average root mean square error</strong> (RMSE) between the manual labels and the ones
predicted by your trained DeepLabCut model. The RMSE is proportional to the mean average
Euclidean error (MAE) between the manual labels and the ones predicted by DeepLabCut.
The MAE is displayed for all pairs and only likely pairs (&gt;p-cutoff). This helps to
exclude, for example, occluded body parts. One of the strengths of DeepLabCut is that
due to the probabilistic output of the scoremap, it can, if sufficiently trained, also
reliably report if a body part is visible in a given frame. (see discussions of finger
tips in reaching and the Drosophila legs during 3D behavior in [Mathis et al, 2018]).</p></li>
<li><p><strong>Mean Average Precision</strong> (mAP) and <strong>Mean Average Recall</strong> (mAR) for the individuals
predicted by your trained DeepLabCut model. This metric describes the precision of your
model, based on a considered definition of what a correct detection of an individual is.
It isn’t as useful for single-animal models, as RMSE does a great job of evaluating your
model in that case.</p></li>
</ul>
<div class="dropdown admonition">
<p class="admonition-title">A more detailed description of mAP and mAR</p>
<p>For multi-animal pose estimation, multiple predictions can be made for each image.
We want to get some idea of the proportion of correct predictions among all predictions
that are made.
However, the notion of “correct prediction” for pose estimation is not straightforward:
is a prediction correct if all predicted keypoints are within 5 pixels of the ground
truth? Within 2 pixels of the ground truth? What if all pixels but one match the ground
truth perfectly, but the wrong prediction is 50 pixels away? Mean average precision (
and mean average recall) estimate the precision/recall of your models by setting
different “thresholds of correctness” and averaging results. How “correct” a
prediction is can be evaluated through <a class="reference external" href="https://cocodataset.org/#keypoints-eval">object-keypoint similarity</a>.</p>
<p>A good resource to get a deeper understanding of mAP is the <a class="reference external" href="https://cs230.stanford.edu/section/8/#object-detection-iou-ap-and-map">Stanford CS230 course</a>. While it
describes mAP for object detection (where bounding boxes are predicted instead of
keypoints), the same metric can be computed for pose estimation, where similarity
between predictions and ground truth is computed through <a class="reference external" href="https://cocodataset.org/#keypoints-eval">object-keypoint similarity</a> instead of intersection-over-union (IoU).</p>
</div>
<p>It’s also important to visually inspect predictions on individual frames to assess the
performance of your model. You can do this by setting <code class="docutils literal notranslate"><span class="pre">plotting=True</span></code> when you call
<code class="docutils literal notranslate"><span class="pre">evaluate_network</span></code>. The evaluation results are computed by typing:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">Shuffles</span><span class="o">=</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">plotting</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>🎥 <a class="reference external" href="https://www.youtube.com/watch?v=bgfnz1wtlpo">VIDEO TUTORIAL AVAILABLE!</a></p>
<p>Setting <code class="docutils literal notranslate"><span class="pre">plotting</span></code> to True plots all the testing and training frames with the manual and predicted labels; these will
be colored by body part type by default. They can alternatively be colored by individual by passing <code class="docutils literal notranslate"><span class="pre">plotting=&quot;individual&quot;</span></code>.
The user should visually check the labeled test (and training) images that are created in the ‘evaluation-results’ directory.
Ideally, DeepLabCut labeled unseen (test images) according to the user’s required accuracy, and the average train
and test errors are comparable (good generalization). What (numerically) comprises an acceptable MAE depends on
many factors (including the size of the tracked body parts, the labeling variability, etc.). Note that the test error can
also be larger than the training error due to human variability (in labeling, see Figure 2 in Mathis et al, Nature Neuroscience 2018).</p>
<p><strong>Optional parameters:</strong></p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Shuffles:</span> <span class="pre">list,</span> <span class="pre">optional</span></code> - List of integers specifying the shuffle indices of the training dataset.
The default is [1]</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">plotting:</span> <span class="pre">bool</span> <span class="pre">|</span> <span class="pre">str,</span> <span class="pre">optional</span></code> - Plots the predictions on the train and test images. The default is <code class="docutils literal notranslate"><span class="pre">False</span></code>;
if provided it must be either <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bodypart&quot;</span></code>, or <code class="docutils literal notranslate"><span class="pre">&quot;individual&quot;</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">show_errors:</span> <span class="pre">bool,</span> <span class="pre">optional</span></code> - Display train and test errors. The default is <code class="docutils literal notranslate"><span class="pre">True</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">comparisonbodyparts:</span> <span class="pre">list</span> <span class="pre">of</span> <span class="pre">bodyparts,</span> <span class="pre">Default</span> <span class="pre">is</span> <span class="pre">all</span></code> - The average error will be computed for those body parts
only (Has to be a subset of the body parts).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">gputouse:</span> <span class="pre">int,</span> <span class="pre">optional</span></code> - Natural number indicating the number of your GPU (see number in nvidia-smi). If you do not
have a GPU, put None. See: <a class="reference external" href="https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries">https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pcutoff:</span> <span class="pre">float</span> <span class="pre">|</span> <span class="pre">list[float]</span> <span class="pre">|</span> <span class="pre">dict[str,</span> <span class="pre">float],</span> <span class="pre">optional</span></code>
(Only applicable when using the PyTorch engine. For TensorFlow, set <code class="docutils literal notranslate"><span class="pre">pcutoff</span></code> in the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file.)
Specifies the cutoff value(s) used to compute evaluation metrics.</p>
<ul>
<li><p>If <code class="docutils literal notranslate"><span class="pre">None</span></code> (default), the cutoff will be loaded from the project configuration.</p></li>
<li><p>To apply a single cutoff value to all bodyparts, provide a <code class="docutils literal notranslate"><span class="pre">float</span></code>.</p></li>
<li><p>To specify different cutoffs per bodypart, provide either:</p>
<ul>
<li><p>A <code class="docutils literal notranslate"><span class="pre">list[float]</span></code>: one value per bodypart, with an additional value for each unique bodypart if applicable.</p></li>
<li><p>A <code class="docutils literal notranslate"><span class="pre">dict[str,</span> <span class="pre">float]</span></code>: where keys are bodypart names and values are the corresponding cutoff values.
If a bodypart is not included in the provided dictionary, a default <code class="docutils literal notranslate"><span class="pre">pcutoff</span></code> of <code class="docutils literal notranslate"><span class="pre">0.6</span></code> will be used for that bodypart.</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>The plots can be customized by editing the <strong>config.yaml</strong> file (i.e., the colormap, scale, marker size (dotsize), and
transparency of labels (alpha-value) can be modified). By default each body part is plotted in a different color
(governed by the colormap) and the plot labels indicate their source. Note that by default the human labels are
plotted as plus (‘+’), DeepLabCut’s predictions either as ‘.’ (for confident predictions with likelihood &gt; <code class="docutils literal notranslate"><span class="pre">pcutoff</span></code>) and
’x’ for (likelihood &lt;= <code class="docutils literal notranslate"><span class="pre">pcutoff</span></code>).</p>
<p>The evaluation results for each shuffle of the training dataset are stored in a unique
subdirectory in a newly created directory ‘evaluation-results-pytorch’ (or
‘evaluation-results’ for TensorFlow models) in the project directory.
The user can visually inspect if the distance between the labeled and the predicted body
parts are acceptable. In the event of benchmarking with different shuffles of same training
dataset, the user can provide multiple shuffle indices to evaluate the corresponding
network. If the generalization is not sufficient, the user might want to:</p>
<p>• check if the labels were imported correctly; i.e., invisible points are not labeled
and the points of interest are labeled accurately</p>
<p>• make sure that the loss has already converged</p>
<p>• consider labeling additional images and make another iteration of the training data set</p>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for evaluate_network</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.compat.evaluate_network">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.compat.</span></span><span class="sig-name descname"><span class="pre">evaluate_network</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Shuffles</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(1,)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plotting</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">show_errors</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">comparisonbodyparts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gputouse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">rescale</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">per_keypoint_evaluation</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">snapshots_to_evaluate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pcutoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">torch_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.compat.evaluate_network" title="Link to this definition">#</a></dt>
<dd><p>Evaluates the network.</p>
<p>Evaluates the network based on the saved models at different stages of the training
network. The evaluation results are stored in the .h5 and .csv file under the
subdirectory ‘evaluation_results’. Change the snapshotindex parameter in the config
file to ‘all’ in order to evaluate all the saved models.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the config.yaml file.</p>
</dd>
<dt><strong>Shuffles: list, optional, default=[1]</strong></dt><dd><p>List of integers specifying the shuffle indices of the training dataset.</p>
</dd>
<dt><strong>trainingsetindex: int or str, optional, default=0</strong></dt><dd><p>Integer specifying which “TrainingsetFraction” to use.
Note that “TrainingFraction” is a list in config.yaml. This variable can also
be set to “all”.</p>
</dd>
<dt><strong>plotting: bool or str, optional, default=False</strong></dt><dd><p>Plots the predictions on the train and test images.
If provided it must be either <code class="docutils literal notranslate"><span class="pre">True</span></code>, <code class="docutils literal notranslate"><span class="pre">False</span></code>, <code class="docutils literal notranslate"><span class="pre">&quot;bodypart&quot;</span></code>, or
<code class="docutils literal notranslate"><span class="pre">&quot;individual&quot;</span></code>. Setting to <code class="docutils literal notranslate"><span class="pre">True</span></code> defaults as <code class="docutils literal notranslate"><span class="pre">&quot;bodypart&quot;</span></code> for
multi-animal projects.
If a detector is used, the predicted bounding boxes will also be plotted.</p>
</dd>
<dt><strong>show_errors: bool, optional, default=True</strong></dt><dd><p>Display train and test errors.</p>
</dd>
<dt><strong>comparisonbodyparts: str or list, optional, default=”all”</strong></dt><dd><p>The average error will be computed for those body parts only.
The provided list has to be a subset of the defined body parts.</p>
</dd>
<dt><strong>gputouse: int or None, optional, default=None</strong></dt><dd><p>Indicates the GPU to use (see number in <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code>). If you do not have a
GPU put <cite>None`</cite>.
See: <a class="reference external" href="https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries">https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries</a></p>
</dd>
<dt><strong>rescale: bool, optional, default=False</strong></dt><dd><p>Evaluate the model at the <code class="docutils literal notranslate"><span class="pre">'global_scale'</span></code> variable (as set in the
<code class="docutils literal notranslate"><span class="pre">pose_config.yaml</span></code> file for a particular project). I.e. every image will be
resized according to that scale and prediction will be compared to the resized
ground truth. The error will be reported in pixels at rescaled to the
<em>original</em> size. I.e. For a [200,200] pixel image evaluated at
<code class="docutils literal notranslate"><span class="pre">global_scale=.5</span></code>, the predictions are calculated on [100,100] pixel images,
compared to 1/2*ground truth and this error is then multiplied by 2!.
The evaluation images are also shown for the original size!</p>
</dd>
<dt><strong>modelprefix: str, optional, default=””</strong></dt><dd><p>Directory containing the deeplabcut models to use when evaluating the network.
By default, the models are assumed to exist in the project folder.</p>
</dd>
<dt><strong>per_keypoint_evaluation: bool, default=False</strong></dt><dd><p>Compute the train and test RMSE for each keypoint, and save the results to
a {model_name}-keypoint-results.csv in the evaluation-results folder</p>
</dd>
<dt><strong>snapshots_to_evaluate: List[str], optional, default=None</strong></dt><dd><p>List of snapshot names to evaluate (e.g. [“snapshot-5000”, “snapshot-7500”]).</p>
</dd>
<dt><strong>pcutoff: float | list[float] | dict[str, float] | None, default=None</strong></dt><dd><p>Only for the PyTorch engine. For the TensorFlow engine, please set the pcutoff
in the <cite>config.yaml</cite> file.
The cutoff to use for computing evaluation metrics. When <cite>None</cite> (default), the
cutoff will be loaded from the project config. If a list is provided, there
should be one value for each bodypart and one value for each unique bodypart
(if there are any). If a dict is provided, the keys should be bodyparts
mapping to pcutoff values for each bodypart. Bodyparts that are not defined
in the dict will have pcutoff set to 0.6.</p>
</dd>
<dt><strong>engine: Engine, optional, default = None.</strong></dt><dd><p>The default behavior loads the engine for the shuffle from the metadata. You can
overwrite this by passing the engine as an argument, but this should generally
not be done.</p>
</dd>
<dt><strong>torch_kwargs:</strong></dt><dd><p>You can add any keyword arguments for the deeplabcut.pose_estimation_pytorch
evaluate_network function here. These arguments are passed to the downstream
function. Available parameters are <cite>snapshotindex</cite>, which overrides the
<cite>snapshotindex</cite> parameter in the project configuration file. For top-down models
the <cite>detector_snapshot_index</cite> parameter can override the index of the detector
to use for evaluation in the project configuration file.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>If you do not want to plot and evaluate with shuffle set to 1.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;, Shuffles=[1],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>If you want to plot and evaluate with shuffle set to 0 and 1.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        Shuffles=[0, 1],</span>
<span class="go">        plotting=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>If you want to plot assemblies for a maDLC project</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        Shuffles=[1],</span>
<span class="go">        plotting=&quot;individual&quot;,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>If you have a PyTorch model for which you want to set a different p-cutoff for
“left_ear” and “right_ear” bodyparts, and keep the one set in the project config
for other bodyparts:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">evaluate_network</span><span class="p">(</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="s2">&quot;/analysis/project/reaching-task/config.yaml&quot;</span><span class="p">,</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">Shuffles</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">],</span>
<span class="gp">&gt;&gt;&gt; </span>    <span class="n">pcutoff</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;left_ear&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">,</span> <span class="s2">&quot;right_ear&quot;</span><span class="p">:</span> <span class="mf">0.8</span><span class="p">},</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">)</span>
</pre></div>
</div>
<p>Note: This defaults to standard plotting for single-animal projects.</p>
</dd></dl>

</div>
<p><strong>maDeepLabCut: (or on normal projects!)</strong></p>
<p>In multi-animal projects, model evaluation is crucial as this is when
the data-driven selection of the optimal skeleton is carried out. Skipping that step
causes video analysis to use the redundant skeleton by default, which is not only slow
but does not guarantee best performance.</p>
<p>You should also plot the scoremaps, locref layers, and PAFs to assess performance:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">extract_save_all_maps</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="n">shuffle</span><span class="p">,</span> <span class="n">Indices</span><span class="o">=</span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">5</span><span class="p">])</span>
</pre></div>
</div>
<p>You can drop “Indices” to run this on all training/testing images (this is very slow!)</p>
</section>
<section id="i-analyze-new-videos">
<h3>(I) Analyze new Videos<a class="headerlink" href="#i-analyze-new-videos" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version 3.0.0: </span>With the addition of conditional top-down models in DeepLabCut 3.0, it’s now possible to
track individuals directly <strong>during video analysis</strong>. If you choose to train any model
with a name that starts with <code class="docutils literal notranslate"><span class="pre">ctd_</span></code>, you’ll be able to call <code class="docutils literal notranslate"><span class="pre">deeplabcut.analyze_videos</span></code>
with <code class="docutils literal notranslate"><span class="pre">ctd_tracking=True</span></code>. To learn more about tracking with CTD, see the <a class="reference external" href="https://github.com/DeepLabCut/DeepLabCut/blob/main/examples/COLAB/COLAB_BUCTD_and_CTD_tracking.ipynb">
<code class="docutils literal notranslate"><span class="pre">COLAB_BUCTD_and_CTD_tracking</span></code></a>
COLAB notebook.</p>
</div>
<p><strong>——————– DECISION POINT ——————-</strong></p>
<p><strong>ATTENTION!</strong>
<strong>Pose estimation and tracking should be thought of as separate steps.</strong> If you do not
have good pose estimation evaluation metrics at this point, stop, check original labels,
add more data, etc –&gt; don’t move forward with this model. If you think you have a good
model, please test the “raw” pose estimation performance on a video to validate
performance:</p>
<p>Please run:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">videos_to_analyze</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;/fullpath/project/videos/testVideo.mp4&#39;</span><span class="p">]</span>
<span class="n">scorername</span> <span class="o">=</span> <span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">videos_to_analyze</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;.mp4&#39;</span><span class="p">)</span>
<span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_video_with_all_detections</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">videos_to_analyze</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;.mp4&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Please note that you do <strong>not</strong> get the .h5/csv file you might be used to getting (this
comes after tracking). You will get a <code class="docutils literal notranslate"><span class="pre">pickle</span></code> file that is used in
<code class="docutils literal notranslate"><span class="pre">create_video_with_all_detections</span></code>.</p>
<p>For models predicting part-affinity fields, another sanity check may be to
examine the distributions of edge affinity costs using <code class="docutils literal notranslate"><span class="pre">deeplabcut.utils.plot_edge_affinity_distributions</span></code>. Easily separable distributions
indicate that the model has learned strong links to group keypoints into distinct
individuals — likely a necessary feature for the assembly stage (note that the amount of
overlap will also depend on the amount of interactions between your animals in the
dataset). All TensorFlow multi-animal models use part-affinity fields and PyTorch models
consisting of just a backbone name (e.g. <code class="docutils literal notranslate"><span class="pre">resnet_50</span></code>, <code class="docutils literal notranslate"><span class="pre">resnet_101</span></code>) use part-affinity
fields. If you’re unsure whether your PyTorch model has a one, check
the <strong>pytorch_config.yaml</strong> for a <code class="docutils literal notranslate"><span class="pre">DLCRNetHead</span></code>.</p>
<p>IF you have good clean out video, ending in <code class="docutils literal notranslate"><span class="pre">....full.mp4</span></code> (and the evaluation metrics
look good, scoremaps look good, plotted evaluation images, and affinity distributions
are far apart for most edges), then go forward!!!</p>
<p>If this does not look good, we recommend extracting and labeling more frames (even from more videos). Try to label close interactions of animals for best performance. Once you label more, you can create a new training set and train.</p>
<p>You can either:</p>
<ol class="arabic simple">
<li><p>extract more frames manually from existing or new videos and label as when initially building the training data set, or</p></li>
<li><p>let DeepLabCut find frames where keypoints were poorly detected and automatically extract those for you. All you need is
to run:</p></li>
</ol>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">find_outliers_in_raw_data</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">pickle_file</span><span class="p">,</span> <span class="n">video_file</span><span class="p">)</span>
</pre></div>
</div>
<p>where pickle_file is the <code class="docutils literal notranslate"><span class="pre">_full.pickle</span></code> one obtains after video analysis.
Flagged frames will be added to your collection of images in the corresponding labeled-data folders for you to label.</p>
</section>
<section id="animal-assembly-and-tracking-across-frames">
<h3>Animal Assembly and Tracking across frames<a class="headerlink" href="#animal-assembly-and-tracking-across-frames" title="Link to this heading">#</a></h3>
<p>After pose estimation, now you perform assembly and tracking.</p>
<div class="versionadded">
<p><span class="versionmodified added">Added in version v2.2.0: </span><em>NEW</em> in 2.2 is a novel data-driven way to set the optimal skeleton and assembly
metrics, so this no longer requires user input. The metrics, in case you do want to edit
them, can be found in the <code class="docutils literal notranslate"><span class="pre">inference_cfg.yaml</span></code> file.</p>
</div>
</section>
<section id="optimized-animal-assembly-video-analysis">
<h3>Optimized Animal Assembly + Video Analysis:<a class="headerlink" href="#optimized-animal-assembly-video-analysis" title="Link to this heading">#</a></h3>
<p>Please note that <strong>novel videos DO NOT need to be added to the config.yaml file</strong>. You
can simply have a folder elsewhere on your computer and pass the video folder (then it
will analyze all videos of the specified type (i.e. <code class="docutils literal notranslate"><span class="pre">videotype='.mp4'</span></code>), or pass the
path to the <strong>folder</strong> or exact video(s) you wish to analyze:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;/fullpath/project/videos/&#39;</span><span class="p">],</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;.mp4&#39;</span><span class="p">,</span> <span class="n">auto_track</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="if-auto-track-true">
<h3>IF auto_track = True:<a class="headerlink" href="#if-auto-track-true" title="Link to this heading">#</a></h3>
<div class="versionadded">
<p><span class="versionmodified added">Added in version v2.2.0.3: </span>A new argument <code class="docutils literal notranslate"><span class="pre">auto_track=True</span></code>, was added to <code class="docutils literal notranslate"><span class="pre">deeplabcut.analyze_videos</span></code> chaining pose
estimation, tracking, and stitching in a single function call with defaults we found to
work well. Thus, you’ll now get the <code class="docutils literal notranslate"><span class="pre">.h5</span></code> file you might be used to getting in standard
DLC. If <code class="docutils literal notranslate"><span class="pre">auto_track=False</span></code>, one must run <code class="docutils literal notranslate"><span class="pre">convert_detections2tracklets</span></code> and
<code class="docutils literal notranslate"><span class="pre">stitch_tracklets</span></code> manually (see below), granting more control over the last steps of
the workflow (ideal for advanced users).</p>
</div>
</section>
<section id="if-auto-track-false">
<h3>IF auto_track = False:<a class="headerlink" href="#if-auto-track-false" title="Link to this heading">#</a></h3>
<p>You can validate the tracking parameters. Namely, you can iteratively change the
parameters, run <code class="docutils literal notranslate"><span class="pre">convert_detections2tracklets</span></code> then load them in the GUI
(<code class="docutils literal notranslate"><span class="pre">refine_tracklets</span></code>) if you want to look at the performance. If you want to edit these,
you will need to open the <code class="docutils literal notranslate"><span class="pre">inference_cfg.yaml</span></code> file (or click button in GUI). The
options are:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Tracking:</span>
<span class="c1">#p/m pixels in width and height for increasing bounding boxes.</span>
<span class="n">boundingboxslack</span> <span class="p">:</span> <span class="mi">0</span>
<span class="c1"># Intersection over Union (IoU) threshold for linking two bounding boxes</span>
<span class="n">iou_threshold</span><span class="p">:</span> <span class="mf">.2</span>
<span class="c1"># maximum duration of a lost tracklet before it&#39;s considered a &quot;new animal&quot; (in frames)</span>
<span class="n">max_age</span><span class="p">:</span> <span class="mi">100</span>
<span class="c1"># minimum number of consecutive frames before a detection is tracked</span>
<span class="n">min_hits</span><span class="p">:</span> <span class="mi">3</span>
</pre></div>
</div>
<ul>
<li><p><strong>IMPORTANT POINT FOR SUPERVISED IDENTITY TRACKING</strong></p>
<p>If the network has been trained to learn the animals’ identities (i.e., you set <code class="docutils literal notranslate"><span class="pre">identity=True</span></code> in config.yaml before training) this information can be leveraged both during: (i) animal assembly, where body parts are grouped based on the animal they are predicted to belong to (affinity between pairs of keypoints is no longer considered in that case); and (ii) animal tracking, where identity only can be utilized in place of motion trackers to form tracklets.</p>
</li>
</ul>
<p>To use this ID information, simply pass:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">convert_detections2tracklets</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">identity_only</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>Note:</strong> If only one individual is to be assembled and tracked, assembly and tracking are skipped, and detections are treated as in single-animal projects; i.e., it is the keypoints with highest confidence that are kept and accumulated over frames to form a single, long tracklet. No action is required from users, this is done automatically.</p></li>
</ul>
<p><strong>Animal assembly and tracking quality</strong> can be assessed via <code class="docutils literal notranslate"><span class="pre">deeplabcut.utils.make_labeled_video.create_video_from_pickled_tracks</span></code>. This function provides an additional diagnostic tool before moving on to refining tracklets.</p>
<p>If animal assemblies do not look pretty, an alternative to the outlier search described above is to pass the
<code class="docutils literal notranslate"><span class="pre">_assemblies.pickle</span></code> to <code class="docutils literal notranslate"><span class="pre">find_outliers_in_raw_data</span></code> in place of the <code class="docutils literal notranslate"><span class="pre">_full.pickle</span></code>.
This will focus the outlier search on unusual assemblies (i.e., animal skeletons that were oddly reconstructed). This may be a bit more sensitive with crowded scenes or frames where animals interact closely.
Note though that at that stage it is likely preferable anyway to carry on with the remaining steps, and extract outliers
from the final h5 file as was customary in single animal projects.</p>
<p>**Next, tracklets are stitched to form complete tracks with:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">stitch_tracklets</span><span class="p">(</span>
    <span class="n">config_path</span><span class="p">,</span>
    <span class="p">[</span><span class="s1">&#39;videofile_path&#39;</span><span class="p">],</span>
    <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;mp4&#39;</span><span class="p">,</span>
    <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">trainingsetindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>Note that the base signature of the function is identical to <code class="docutils literal notranslate"><span class="pre">analyze_videos</span></code> and <code class="docutils literal notranslate"><span class="pre">convert_detections2tracklets</span></code>.
If the number of tracks to reconstruct is different from the number of individuals
originally defined in the config.yaml, <code class="docutils literal notranslate"><span class="pre">n_tracks</span></code> (i.e., the number of animals you have in your video)
can be directly specified as follows:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">stitch_tracklets</span><span class="p">(</span><span class="o">...</span><span class="p">,</span> <span class="n">n_tracks</span><span class="o">=</span><span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>In such cases, file columns will default to dummy animal names (ind1, ind2, …, up to indn).</p>
</section>
<section id="id1">
<h3>API Docs<a class="headerlink" href="#id1" title="Link to this heading">#</a></h3>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for analyze_videos</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.compat.analyze_videos">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.compat.</span></span><span class="sig-name descname"><span class="pre">analyze_videos</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">gputouse</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as_csv</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">in_random_order</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destfolder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">batchsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cropping</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">TFGPUinference</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dynamic</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">bool</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">(False,</span> <span class="pre">0.5,</span> <span class="pre">10)</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">robust_nframes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">allow_growth</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_shelve</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">auto_track</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_tracks</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">animal_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibrate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">use_openvino</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">torch_kwargs</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.compat.analyze_videos" title="Link to this definition">#</a></dt>
<dd><p>Makes prediction based on a trained network.</p>
<p>The index of the trained network is specified by parameters in the config file
(in particular the variable ‘snapshotindex’).</p>
<p>The labels are stored as MultiIndex Pandas Array, which contains the name of
the network, body part name, (x, y) label position in pixels, and the
likelihood for each frame per body part. These arrays are stored in an
efficient Hierarchical Data Format (HDF) in the same directory where the video
is stored. However, if the flag save_as_csv is set to True, the data can also
be exported in comma-separated values format (.csv), which in turn can be
imported in many programs, such as MATLAB, R, Prism, etc.</p>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>config: str</strong></dt><dd><p>Full path of the config.yaml file.</p>
</dd>
<dt><strong>videos: list[str]</strong></dt><dd><p>A list of strings containing the full paths to videos for analysis or a path to
the directory, where all the videos with same extension are stored.</p>
</dd>
<dt><strong>videotype: str, optional, default=””</strong></dt><dd><p>Checks for the extension of the video in case the input to the video is a
directory. Only videos with this extension are analyzed. If left unspecified,
videos with common extensions (‘avi’, ‘mp4’, ‘mov’, ‘mpeg’, ‘mkv’) are kept.</p>
</dd>
<dt><strong>shuffle: int, optional, default=1</strong></dt><dd><p>An integer specifying the shuffle index of the training dataset used for
training the network.</p>
</dd>
<dt><strong>trainingsetindex: int, optional, default=0</strong></dt><dd><p>Integer specifying which TrainingsetFraction to use.
By default the first (note that TrainingFraction is a list in config.yaml).</p>
</dd>
<dt><strong>gputouse: int or None, optional, default=None</strong></dt><dd><p>Only for the TensorFlow engine (for the PyTorch engine see the <code class="docutils literal notranslate"><span class="pre">torch_kwargs</span></code>:
you can use <code class="docutils literal notranslate"><span class="pre">device</span></code>).
Indicates the GPU to use (see number in <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code>). If you do not have a
GPU put <code class="docutils literal notranslate"><span class="pre">None</span></code>.
See: <a class="reference external" href="https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries">https://nvidia.custhelp.com/app/answers/detail/a_id/3751/~/useful-nvidia-smi-queries</a></p>
</dd>
<dt><strong>save_as_csv: bool, optional, default=False</strong></dt><dd><p>Saves the predictions in a .csv file.</p>
</dd>
<dt><strong>in_random_order: bool, optional (default=True)</strong></dt><dd><p>Whether or not to analyze videos in a random order.
This is only relevant when specifying a video directory in <cite>videos</cite>.</p>
</dd>
<dt><strong>destfolder: string or None, optional, default=None</strong></dt><dd><p>Specifies the destination folder for analysis data. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the path of
the video is used. Note that for subsequent analysis this folder also needs to
be passed.</p>
</dd>
<dt><strong>batchsize: int or None, optional, default=None</strong></dt><dd><p>Currently not supported by the PyTorch engine.
Change batch size for inference; if given overwrites value in <code class="docutils literal notranslate"><span class="pre">pose_cfg.yaml</span></code>.</p>
</dd>
<dt><strong>cropping: list or None, optional, default=None</strong></dt><dd><p>List of cropping coordinates as [x1, x2, y1, y2].
Note that the same cropping parameters will then be used for all videos.
If different video crops are desired, run <code class="docutils literal notranslate"><span class="pre">analyze_videos</span></code> on individual
videos with the corresponding cropping coordinates.</p>
</dd>
<dt><strong>TFGPUinference: bool, optional, default=True</strong></dt><dd><p>Only for the TensorFlow engine.
Perform inference on GPU with TensorFlow code. Introduced in “Pretraining
boosts out-of-domain robustness for pose estimation” by Alexander Mathis,
Mert Yüksekgönül, Byron Rogers, Matthias Bethge, Mackenzie W. Mathis.
Source: <a class="reference external" href="https://arxiv.org/abs/1909.11229">https://arxiv.org/abs/1909.11229</a></p>
</dd>
<dt><strong>dynamic: tuple(bool, float, int) triple containing (state, det_threshold, margin)</strong></dt><dd><p>If the state is true, then dynamic cropping will be performed. That means that
if an object is detected (i.e. any body part &gt; detectiontreshold), then object
boundaries are computed according to the smallest/largest x position and
smallest/largest y position of all body parts. This  window is expanded by the
margin and from then on only the posture within this crop is analyzed (until the
object is lost, i.e. &lt;detectiontreshold). The current position is utilized for
updating the crop window for the next frame (this is why the margin is important
and should be set large enough given the movement of the animal).</p>
</dd>
<dt><strong>modelprefix: str, optional, default=””</strong></dt><dd><p>Directory containing the deeplabcut models to use when evaluating the network.
By default, the models are assumed to exist in the project folder.</p>
</dd>
<dt><strong>robust_nframes: bool, optional, default=False</strong></dt><dd><p>Evaluate a video’s number of frames in a robust manner.
This option is slower (as the whole video is read frame-by-frame),
but does not rely on metadata, hence its robustness against file corruption.</p>
</dd>
<dt><strong>allow_growth: bool, optional, default=False.</strong></dt><dd><p>Only for the TensorFlow engine.
For some smaller GPUs the memory issues happen. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the memory
allocator does not pre-allocate the entire specified GPU memory region, instead
starting small and growing as needed.
See issue: <a class="reference external" href="https://forum.image.sc/t/how-to-stop-running-out-of-vram/30551/2">https://forum.image.sc/t/how-to-stop-running-out-of-vram/30551/2</a></p>
</dd>
<dt><strong>use_shelve: bool, optional, default=False</strong></dt><dd><p>By default, data are dumped in a pickle file at the end of the video analysis.
Otherwise, data are written to disk on the fly using a “shelf”; i.e., a
pickle-based, persistent, database-like object by default, resulting in
constant memory footprint.</p>
</dd>
<dt><strong>The following parameters are only relevant for multi-animal projects:</strong></dt><dd></dd>
<dt><strong>auto_track: bool, optional, default=True</strong></dt><dd><p>By default, tracking and stitching are automatically performed, producing the
final h5 data file. This is equivalent to the behavior for single-animal
projects.</p>
<p>If <code class="docutils literal notranslate"><span class="pre">False</span></code>, one must run <code class="docutils literal notranslate"><span class="pre">convert_detections2tracklets</span></code> and
<code class="docutils literal notranslate"><span class="pre">stitch_tracklets</span></code> afterwards, in order to obtain the h5 file.</p>
</dd>
<dt><strong>This function has 3 related sub-calls:</strong></dt><dd></dd>
<dt><strong>identity_only: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> and animal identity was learned by the model, assembly and tracking
rely exclusively on identity prediction.</p>
</dd>
<dt><strong>calibrate: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, use training data to calibrate the animal assembly procedure. This
improves its robustness to wrong body part links, but requires very little
missing data.</p>
</dd>
<dt><strong>n_tracks: int or None, optional, default=None</strong></dt><dd><p>Number of tracks to reconstruct. By default, taken as the number of individuals
defined in the config.yaml. Another number can be passed if the number of
animals in the video is different from the number of animals the model was
trained on.</p>
</dd>
<dt><strong>animal_names: list[str], optional</strong></dt><dd><p>If you want the names given to individuals in the labeled data file, you can
specify those names as a list here. If given and <cite>n_tracks</cite> is None, <cite>n_tracks</cite>
will be set to <cite>len(animal_names)</cite>. If <cite>n_tracks</cite> is not None, then it must be
equal to <cite>len(animal_names)</cite>. If it is not given, then <cite>animal_names</cite> will
be loaded from the <cite>individuals</cite> in the project config.yaml file.</p>
</dd>
<dt><strong>use_openvino: str, optional</strong></dt><dd><p>Only for the TensorFlow engine.
Use “CPU” for inference if OpenVINO is available in the Python environment.</p>
</dd>
<dt><strong>engine: Engine, optional, default = None.</strong></dt><dd><p>The default behavior loads the engine for the shuffle from the metadata. You can
overwrite this by passing the engine as an argument, but this should generally
not be done.</p>
</dd>
<dt><strong>torch_kwargs:</strong></dt><dd><p>Any extra parameters to pass to the PyTorch API, such as <code class="docutils literal notranslate"><span class="pre">device</span></code> which can
be used to specify the CUDA device to use for training.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>DLCScorer: str</dt><dd><p>the scorer used to analyze the videos</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Analyzing a single video on Windows</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span>
<span class="go">        &#39;C:\myproject\reaching-task\config.yaml&#39;,</span>
<span class="go">        [&#39;C:\yourusername\rig-95\Videos\reachingvideo1.avi&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Analyzing a single video on Linux/MacOS</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/analysis/project/videos/reachingvideo1.avi&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Analyze all videos of type <code class="docutils literal notranslate"><span class="pre">avi</span></code> in a folder</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/analysis/project/videos&#39;],</span>
<span class="go">        videotype=&#39;.avi&#39;,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Analyze multiple videos</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo1.avi&#39;,</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo2.avi&#39;,</span>
<span class="go">        ],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Analyze multiple videos with <code class="docutils literal notranslate"><span class="pre">shuffle=2</span></code></p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo1.avi&#39;,</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo2.avi&#39;,</span>
<span class="go">        ],</span>
<span class="go">        shuffle=2,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Analyze multiple videos with <code class="docutils literal notranslate"><span class="pre">shuffle=2</span></code>, save results as an additional csv file</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">analyze_videos</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo1.avi&#39;,</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo2.avi&#39;,</span>
<span class="go">        ],</span>
<span class="go">        shuffle=2,</span>
<span class="go">        save_as_csv=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for convert_detections2tracklets</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.compat.convert_detections2tracklets">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.compat.</span></span><span class="sig-name descname"><span class="pre">convert_detections2tracklets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destfolder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ignore_bodyparts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">inferencecfg</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">dict</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">greedy</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">calibrate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">window_size</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">identity_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">engine</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">Engine</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.compat.convert_detections2tracklets" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>This should be called at the end of deeplabcut.analyze_videos for multianimal projects!</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><blockquote>
<div><p>Full path of the config.yaml file as a string.</p>
</div></blockquote>
<dl class="simple">
<dt>videos<span class="classifier">list</span></dt><dd><p>A list of strings containing the full paths to videos for analysis or a path to the directory, where all the videos with same extension are stored.</p>
</dd>
<dt>videotype: string, optional</dt><dd><p>Checks for the extension of the video in case the input to the video is a directory.</p>
</dd>
</dl>
</dd>
<dt><strong>Only videos with this extension are analyzed.</strong></dt><dd><blockquote>
<div><p>If left unspecified, videos with common extensions (‘avi’, ‘mp4’, ‘mov’, ‘mpeg’, ‘mkv’) are kept.</p>
</div></blockquote>
<dl class="simple">
<dt>shuffle: int, optional</dt><dd><p>An integer specifying the shuffle index of the training dataset used for training the network. The default is 1.</p>
</dd>
<dt>trainingsetindex: int, optional</dt><dd><p>Integer specifying which TrainingsetFraction to use. By default the first (note that TrainingFraction is a list in config.yaml).</p>
</dd>
<dt>overwrite: bool, optional.</dt><dd><p>Overwrite tracks file i.e. recompute tracks from full detections and overwrite.</p>
</dd>
<dt>destfolder: string, optional</dt><dd><p>Specifies the destination folder for analysis data (default is the path of the video). Note that for subsequent analysis this
folder also needs to be passed.</p>
</dd>
<dt>ignore_bodyparts: optional</dt><dd><p>List of body part names that should be ignored during tracking (advanced).
By default, all the body parts are used.</p>
</dd>
<dt>inferencecfg: Default is None.</dt><dd><p>Configuration file for inference (assembly of individuals). Ideally
should be obtained from cross validation (during evaluation). By default
the parameters are loaded from inference_cfg.yaml, but these get_level_values
can be overwritten.</p>
</dd>
<dt>calibrate: bool, optional (default=False)</dt><dd><p>If True, use training data to calibrate the animal assembly procedure.
This improves its robustness to wrong body part links,
but requires very little missing data.</p>
</dd>
<dt>window_size: int, optional (default=0)</dt><dd><p>Recurrent connections in the past <cite>window_size</cite> frames are
prioritized during assembly. By default, no temporal coherence cost
is added, and assembly is driven mainly by part affinity costs.</p>
</dd>
<dt>identity_only: bool, optional (default=False)</dt><dd><p>If True and animal identity was learned by the model,
assembly and tracking rely exclusively on identity prediction.</p>
</dd>
<dt>track_method: string, optional</dt><dd><p>Specifies the tracker used to generate the pose estimation data.
For multiple animals, must be either ‘box’, ‘skeleton’, or ‘ellipse’
and will be taken from the config.yaml file if none is given.</p>
</dd>
<dt>engine: Engine, optional, default = None.</dt><dd><p>The default behavior loads the engine for the shuffle from the metadata. You can
overwrite this by passing the engine as an argument, but this should generally
not be done.</p>
</dd>
</dl>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>If you want to convert detections to tracklets:
&gt;&gt;&gt; import deeplabcut
&gt;&gt;&gt; deeplabcut.convert_detections2tracklets(
&gt;&gt;&gt;    “/analysis/project/reaching-task/config.yaml”,
&gt;&gt;&gt;    [“/analysis/project/video1.mp4”],
&gt;&gt;&gt;    videotype=’.mp4’,
&gt;&gt;&gt; )</p>
<p>If you want to convert detections to tracklets based on box_tracker:
&gt;&gt;&gt; import deeplabcut
&gt;&gt;&gt; deeplabcut.convert_detections2tracklets(
&gt;&gt;&gt;    “/analysis/project/reaching-task/config.yaml”,
&gt;&gt;&gt;    [“/analysis/project/video1.mp4”],
&gt;&gt;&gt;    videotype=”.mp4”,
&gt;&gt;&gt;    track_method=”box”,
&gt;&gt;&gt; )</p>
<hr class="docutils" />
</dd></dl>

</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for stitch_tracklets</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.refine_training_dataset.stitch.stitch_tracklets">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.refine_training_dataset.stitch.</span></span><span class="sig-name descname"><span class="pre">stitch_tracklets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config_path</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_tracks</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">animal_names</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_length</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">split_tracklets</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">prestitch_residuals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_gap</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">weight_func</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destfolder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_checkpoint</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.refine_training_dataset.stitch.stitch_tracklets" title="Link to this definition">#</a></dt>
<dd><blockquote>
<div><p>Stitch sparse tracklets into full tracks via a graph-based,
minimum-cost flow optimization problem.</p>
</div></blockquote>
<dl class="field-list">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl>
<dt><strong>config_path</strong><span class="classifier">str</span></dt><dd><blockquote>
<div><p>Path to the main project config.yaml file.</p>
</div></blockquote>
<dl class="simple">
<dt>videos<span class="classifier">list</span></dt><dd><p>A list of strings containing the full paths to videos for analysis or a path to the directory, where all the videos with same extension are stored.</p>
</dd>
<dt>videotype: string, optional</dt><dd><p>Checks for the extension of the video in case the input to the video is a directory.</p>
</dd>
</dl>
</dd>
<dt><strong>Only videos with this extension are analyzed.</strong></dt><dd><blockquote>
<div><p>If left unspecified, videos with common extensions (‘avi’, ‘mp4’, ‘mov’, ‘mpeg’, ‘mkv’) are kept.</p>
</div></blockquote>
<dl class="simple">
<dt>shuffle: int, optional</dt><dd><p>An integer specifying the shuffle index of the training dataset used for training the network. The default is 1.</p>
</dd>
<dt>trainingsetindex: int, optional</dt><dd><p>Integer specifying which TrainingsetFraction to use. By default the first (note that TrainingFraction is a list in config.yaml).</p>
</dd>
<dt>n_tracks<span class="classifier">int, optional</span></dt><dd><p>Number of tracks to reconstruct. By default, taken as the number
of individuals defined in the config.yaml. Another number can be
passed if the number of animals in the video is different from
the number of animals the model was trained on.</p>
</dd>
<dt>animal_names: list, optional</dt><dd><p>If you want the names given to individuals in the labeled data file, you can
specify those names as a list here. If given and <cite>n_tracks</cite> is None, <cite>n_tracks</cite>
will be set to <cite>len(animal_names)</cite>. If <cite>n_tracks</cite> is not None, then it must be
equal to <cite>len(animal_names)</cite>. If it is not given, then <cite>animal_names</cite> will
be loaded from the <cite>individuals</cite> in the project config.yaml file.</p>
</dd>
<dt>min_length<span class="classifier">int, optional</span></dt><dd><p>Tracklets less than <cite>min_length</cite> frames of length
are considered to be residuals; i.e., they do not participate
in building the graph and finding the solution to the
optimization problem, but are rather added last after
“almost-complete” tracks are formed. The higher the value,
the lesser the computational cost, but the higher the chance of
discarding relatively long and reliable tracklets that are
essential to solving the stitching task.
Default is 10, and must be 3 at least.</p>
</dd>
<dt>split_tracklets<span class="classifier">bool, optional</span></dt><dd><p>By default, tracklets whose time indices are not consecutive integers
are split in shorter tracklets whose time continuity is guaranteed.
This is for example very powerful to get rid of tracking errors
(e.g., identity switches) which are often signaled by a missing
time frame at the moment they occur. Note though that for long
occlusions where tracker re-identification capability can be trusted,
setting <cite>split_tracklets</cite> to False is preferable.</p>
</dd>
<dt>prestitch_residuals<span class="classifier">bool, optional</span></dt><dd><p>Residuals will by default be grouped together according to their
temporal proximity prior to being added back to the tracks.
This is done to improve robustness and simultaneously reduce complexity.</p>
</dd>
<dt>max_gap<span class="classifier">int, optional</span></dt><dd><p>Maximal temporal gap to allow between a pair of tracklets.
This is automatically determined by the TrackletStitcher by default.</p>
</dd>
<dt>weight_func<span class="classifier">callable, optional</span></dt><dd><p>Function accepting two tracklets as arguments and returning a scalar
that must be inversely proportional to the likelihood that the tracklets
belong to the same track; i.e., the higher the confidence that the
tracklets should be stitched together, the lower the returned value.</p>
</dd>
<dt>destfolder: string, optional</dt><dd><p>Specifies the destination folder for analysis data (default is the path of the
video). Note that for subsequent analysis this folder also needs to be passed.</p>
</dd>
<dt>track_method: string, optional</dt><dd><p>Specifies the tracker used to generate the pose estimation data.
For multiple animals, must be either ‘box’, ‘skeleton’, or ‘ellipse’
and will be taken from the config.yaml file if none is given.</p>
</dd>
<dt>output_name<span class="classifier">str, optional</span></dt><dd><p>Name of the output h5 file.
By default, tracks are automatically stored into the same directory
as the pickle file and with its name.</p>
</dd>
<dt>save_as_csv: bool, optional</dt><dd><p>Whether to write the tracks to a CSV file too (False by default).</p>
</dd>
</dl>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>A TrackletStitcher object</dt><dd></dd>
</dl>
</dd>
</dl>
</dd></dl>

</div>
</section>
<section id="using-unsupervised-identity-tracking">
<h3>Using Unsupervised Identity Tracking:<a class="headerlink" href="#using-unsupervised-identity-tracking" title="Link to this heading">#</a></h3>
<p>In Lauer et al. 2022 we introduced a new method to do unsupervised reID of animals.
Here, you can use the tracklets to learn the identity of animals to enhance your
tracking performance. To use the code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">transformer_reID</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">videos_to_analyze</span><span class="p">,</span> <span class="n">n_tracks</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">videotype</span><span class="o">=</span><span class="s2">&quot;mp4&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note you should pass the n_tracks (number of animals) you expect to see in the video.</p>
</section>
<section id="refine-tracklets">
<h3>Refine Tracklets:<a class="headerlink" href="#refine-tracklets" title="Link to this heading">#</a></h3>
<p>You can also optionally <strong>refine the tracklets</strong>. You can fix both “major” ID swaps, i.e. perhaps when animals cross, and you can micro-refine the individual body points. You will load the <code class="docutils literal notranslate"><span class="pre">...trackertype.pickle</span></code> or <code class="docutils literal notranslate"><span class="pre">.h5'</span></code> file that was created above, and then you can launch a GUI to interactively refine the data. This also has several options, so please check out the docstring. Upon saving the refined tracks you get an <code class="docutils literal notranslate"><span class="pre">.h5</span></code> file (akin to what you might be used to from standard DLC. You can also load (1) filter this to take care of small jitters, and (2) load this <code class="docutils literal notranslate"><span class="pre">.h5</span></code> this to refine (again) in case you find another issue, etc!</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">refine_tracklets</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="n">pickle_or_h5_file</span><span class="p">,</span> <span class="n">videofile_path</span><span class="p">,</span> <span class="n">max_gap</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">min_swap_len</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">min_tracklet_len</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">trail_len</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
</pre></div>
</div>
<p>If you use the GUI (or otherwise), here are some settings to consider:</p>
<img src="https://images.squarespace-cdn.com/content/v1/57f6d51c9f74566f55ecf271/1619628014395-BQ09VLLTKCLQQGRB5T9A/ke17ZwdGBToddI8pDm48kLMj_XrWI9gi4tVeBdgcB8p7gQa3H78H3Y0txjaiv_0fDoOvxcdMmMKkDsyUqMSsMWxHk725yiiHCCLfrh8O1z4YTzHvnKhyp6Da-NYroOW3ZGjoBKy3azqku80C789l0lt53wR20brczws2A6XSGt3kSTbW7uM0ncVKHWPvgHR4kN5Ka1TcK96ljy4ji9jPkQ/TrackletGUI.png?format=1000w" width="950" title="maDLCtrack" alt="maDLC" align="center" vspace = "50">
<p>*note, setting <code class="docutils literal notranslate"><span class="pre">max_gap=0</span></code> can be used to fill in all frames across the video; otherwise, 1-n is the # of frames you want to fill in, i.e. maybe you want to fill in short gaps of 5 frames, but 15 frames indicates another issue, etc. You can test this in the GUI very easy by editing the value and then re-launch pop-up GUI.</p>
<p>If you fill in gaps, they will be associated to an ultra low probability, 0.01, so you are aware this is not the networks best estimate, this is the human-override! Thus, if you create a video, you need to set your pcutoff to 0 if you want to see these filled in frames.</p>
<p><a class="reference internal" href="#functionDetails.md#madeeplabcut-critical-point---assemble--refine-tracklets"><span class="xref myst">Read more here!</span></a></p>
<p>Short demo:</p>
 <p align="center">
<img src="https://images.squarespace-cdn.com/content/v1/57f6d51c9f74566f55ecf271/1588690928000-90ZMRIM8SN6QE20ZOMNX/ke17ZwdGBToddI8pDm48kJ1oJoOIxBAgRD2ClXVCmKFZw-zPPgdn4jUwVcJE1ZvWQUxwkmyExglNqGp0IvTJZUJFbgE-7XRK3dMEBRBhUpxBw7VlGKDQO2xTcc51Yv6DahHgScLwHgvMZoEtbzk_9vMJY_JknNFgVzVQ2g0FD_s/refineDEMO.gif?format=750w" width="70%">
</p>
</section>
<section id="j-filter-pose-data">
<h3>(J) Filter Pose Data<a class="headerlink" href="#j-filter-pose-data" title="Link to this heading">#</a></h3>
<p>Firstly, Here are some tips for scaling up your video analysis, including looping over many folders for batch processing: <a class="github reference external" href="https://github.com/DeepLabCut/DeepLabCut/wiki/Batch-Processing-your-Analysis">DeepLabCut/DeepLabCut</a></p>
<p>You can also filter the predicted bodyparts by:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">filterpredictions</span><span class="p">(</span><span class="n">config_path</span><span class="p">,[</span><span class="s1">&#39;/fullpath/project/videos/reachingvideo1.avi&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>Note, this creates a file with the ending filtered.h5 that you can use for further analysis. This filtering step has many parameters, so please see the full docstring by typing: <code class="docutils literal notranslate"><span class="pre">deeplabcut.filterpredictions?</span></code></p>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.post_processing.filtering.filterpredictions">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.post_processing.filtering.</span></span><span class="sig-name descname"><span class="pre">filterpredictions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">video</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filtertype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'median'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">windowlength</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">p_bound</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.001</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">ARdegree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">3</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">MAdegree</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alpha</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.01</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_as_csv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destfolder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_data</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.post_processing.filtering.filterpredictions" title="Link to this definition">#</a></dt>
<dd><p>Fits frame-by-frame pose predictions.</p>
<p>The pose predictions are fitted with ARIMA model (filtertype=’arima’) or median
filter (default).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the config.yaml file.</p>
</dd>
<dt><strong>video</strong><span class="classifier">string</span></dt><dd><p>Full path of the video to extract the frame from. Make sure that this video is
already analyzed.</p>
</dd>
<dt><strong>shuffle</strong><span class="classifier">int, optional, default=1</span></dt><dd><p>The shuffle index of training dataset. The extracted frames will be stored in
the labeled-dataset for the corresponding shuffle of training dataset.</p>
</dd>
<dt><strong>trainingsetindex: int, optional, default=0</strong></dt><dd><p>Integer specifying which TrainingsetFraction to use.
Note that TrainingFraction is a list in config.yaml.</p>
</dd>
<dt><strong>filtertype: string, optional, default=”median”.</strong></dt><dd><p>The filter type - ‘arima’, ‘median’ or ‘spline’.</p>
</dd>
<dt><strong>windowlength: int, optional, default=5</strong></dt><dd><p>For filtertype=’median’ filters the input array using a local window-size given
by windowlength. The array will automatically be zero-padded.
<a class="reference external" href="https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.medfilt.html">https://docs.scipy.org/doc/scipy/reference/generated/scipy.signal.medfilt.html</a>.
The windowlenght should be an odd number.
If filtertype=’spline’, windowlength is the maximal gap size to fill.</p>
</dd>
<dt><strong>p_bound: float between 0 and 1, optional, default=0.001</strong></dt><dd><p>For filtertype ‘arima’ this parameter defines the likelihood below,
below which a body part will be consided as missing data for filtering purposes.</p>
</dd>
<dt><strong>ARdegree: int, optional, default=3</strong></dt><dd><p>For filtertype ‘arima’ Autoregressive degree of Sarimax model degree.
see <a class="reference external" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.sarimax.SARIMAX.html">https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.sarimax.SARIMAX.html</a></p>
</dd>
<dt><strong>MAdegree: int, optional, default=1</strong></dt><dd><p>For filtertype ‘arima’ Moving Average degree of Sarimax model degree.
See <a class="reference external" href="https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.sarimax.SARIMAX.html">https://www.statsmodels.org/dev/generated/statsmodels.tsa.statespace.sarimax.SARIMAX.html</a></p>
</dd>
<dt><strong>alpha: float, optional, default=0.01</strong></dt><dd><p>Significance level for detecting outliers based on confidence interval of fitted SARIMAX model.</p>
</dd>
<dt><strong>save_as_csv: bool, optional, default=True</strong></dt><dd><p>Saves the predictions in a .csv file.</p>
</dd>
<dt><strong>destfolder: string, optional, default=None</strong></dt><dd><p>Specifies the destination folder for analysis data. If <code class="docutils literal notranslate"><span class="pre">None</span></code>, the path of
the video is used by default. Note that for subsequent analysis this folder
also needs to be passed.</p>
</dd>
<dt><strong>modelprefix: str, optional, default=””</strong></dt><dd><p>Directory containing the deeplabcut models to use when evaluating the network.
By default, the models are assumed to exist in the project folder.</p>
</dd>
<dt><strong>track_method: string, optional, default=””</strong></dt><dd><p>Specifies the tracker used to generate the data.
Empty by default (corresponding to a single animal project).
For multiple animals, must be either ‘box’, ‘skeleton’, or ‘ellipse’ and will
be taken from the config.yaml file if none is given.</p>
</dd>
<dt><strong>return_data: bool, optional, default=False</strong></dt><dd><p>If True, returns a dictionary of the filtered data keyed by video names.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>video_to_filtered_df</dt><dd><p>Dictionary mapping video filepaths to filtered dataframes.</p>
<ul class="simple">
<li><p>If no videos exist, the dictionary will be empty.</p></li>
<li><p>If a video is not analyzed, the corresponding value in the dictionary will be
None.</p></li>
</ul>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Arima model:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">filterpredictions</span><span class="p">(</span>
<span class="go">        &#39;C:\myproject\reaching-task\config.yaml&#39;,</span>
<span class="go">        [&#39;C:\myproject\trailtracking-task\test.mp4&#39;],</span>
<span class="go">        shuffle=3,</span>
<span class="go">        filterype=&#39;arima&#39;,</span>
<span class="go">        ARdegree=5,</span>
<span class="go">        MAdegree=2,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Use median filter over 10 bins:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">filterpredictions</span><span class="p">(</span>
<span class="go">        &#39;C:\myproject\reaching-task\config.yaml&#39;,</span>
<span class="go">        [&#39;C:\myproject\trailtracking-task\test.mp4&#39;],</span>
<span class="go">        shuffle=3,</span>
<span class="go">        windowlength=10,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>One can then use the filtered rather than the frame-by-frame predictions by calling:</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">plot_trajectories</span><span class="p">(</span>
<span class="go">        &#39;C:\myproject\reaching-task\config.yaml&#39;,</span>
<span class="go">        [&#39;C:\myproject\trailtracking-task\test.mp4&#39;],</span>
<span class="go">        shuffle=3,</span>
<span class="go">        filtered=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span>
<span class="go">        &#39;C:\myproject\reaching-task\config.yaml&#39;,</span>
<span class="go">        [&#39;C:\myproject\trailtracking-task\test.mp4&#39;],</span>
<span class="go">        shuffle=3,</span>
<span class="go">        filtered=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

</div>
</section>
<section id="k-plot-trajectories-l-create-labeled-videos">
<h3>(K) Plot Trajectories , (L) Create Labeled Videos<a class="headerlink" href="#k-plot-trajectories-l-create-labeled-videos" title="Link to this heading">#</a></h3>
<ul class="simple">
<li><p><strong>NOTE :bulb::mega::</strong> Before you create a video, you should set what threshold to use for plotting. This is set in the <code class="docutils literal notranslate"><span class="pre">config.yaml</span></code> file as <code class="docutils literal notranslate"><span class="pre">pcutoff</span></code> - if you have a well trained network, this should be high, i.e. set it to <code class="docutils literal notranslate"><span class="pre">0.8</span></code> or higher! IF YOU FILLED IN GAPS, you need to set this to <code class="docutils literal notranslate"><span class="pre">0</span></code> to “see” the filled in parts.</p></li>
<li><p>You can also determine a good <code class="docutils literal notranslate"><span class="pre">pcutoff</span></code> value by looking at the likelihood plot created during <code class="docutils literal notranslate"><span class="pre">plot_trajectories</span></code>:</p></li>
</ul>
<p>Plot the outputs:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="n">deeplabcut</span><span class="o">.</span><span class="n">plot_trajectories</span><span class="p">(</span><span class="n">config_path</span><span class="p">,[</span><span class="s1">&#39;/fullpath/project/videos/reachingvideo1.avi&#39;</span><span class="p">],</span><span class="n">filtered</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>Create videos:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span>  <span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span><span class="n">config_path</span><span class="p">,</span> <span class="p">[</span><span class="n">videos</span><span class="p">],</span> <span class="n">videotype</span><span class="o">=</span><span class="s1">&#39;avi&#39;</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">trainingsetindex</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">filtered</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">fastmode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">save_frames</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">keypoints_only</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">Frames2plot</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">displayedbodyparts</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">displayedindividuals</span><span class="o">=</span><span class="s1">&#39;all&#39;</span><span class="p">,</span> <span class="n">codec</span><span class="o">=</span><span class="s1">&#39;mp4v&#39;</span><span class="p">,</span> <span class="n">outputframerate</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">destfolder</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">draw_skeleton</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">trailpoints</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">displaycropped</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">color_by</span><span class="o">=</span><span class="s1">&#39;bodypart&#39;</span><span class="p">,</span> <span class="n">track_method</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><strong>NOTE :bulb::mega::</strong> You have a lot of options in terms of video plotting (quality, display type, etc). We recommend checking the docstring!</p></li>
</ul>
<p>(more details <a class="reference internal" href="#functionDetails.md#i-video-analysis-and-plotting-results"><span class="xref myst">here</span></a>)</p>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for plot_trajectories</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.utils.plotting.plot_trajectories">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.utils.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_trajectories</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filtered</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displayedbodyparts</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displayedindividuals</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">showfigures</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destfolder</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">imagetype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'.png'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">resolution</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">100</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">linewidth</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_method</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pcutoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.utils.plotting.plot_trajectories" title="Link to this definition">#</a></dt>
<dd><p>Plots the trajectories of various bodyparts across the video.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config: str</strong></dt><dd><p>Full path of the config.yaml file.</p>
</dd>
<dt><strong>videos: list[str]</strong></dt><dd><p>Full paths to videos for analysis or a path to the directory, where all the
videos with same extension are stored.</p>
</dd>
<dt><strong>videotype: str, optional, default=””</strong></dt><dd><p>Checks for the extension of the video in case the input to the video is a
directory. Only videos with this extension are analyzed.
If left unspecified, videos with common extensions
(‘avi’, ‘mp4’, ‘mov’, ‘mpeg’, ‘mkv’) are kept.</p>
</dd>
<dt><strong>shuffle: int, optional, default=1</strong></dt><dd><p>Integer specifying the shuffle index of the training dataset.</p>
</dd>
<dt><strong>trainingsetindex: int, optional, default=0</strong></dt><dd><p>Integer specifying which TrainingsetFraction to use.
Note that TrainingFraction is a list in config.yaml.</p>
</dd>
<dt><strong>filtered: bool, optional, default=False</strong></dt><dd><p>Boolean variable indicating if filtered output should be plotted rather than
frame-by-frame predictions. Filtered version can be calculated with
<code class="docutils literal notranslate"><span class="pre">deeplabcut.filterpredictions</span></code>.</p>
</dd>
<dt><strong>displayedbodyparts: list[str] or str, optional, default=”all”</strong></dt><dd><p>This select the body parts that are plotted in the video.
Either <code class="docutils literal notranslate"><span class="pre">all</span></code>, then all body parts from config.yaml are used,
or a list of strings that are a subset of the full list.
E.g. [‘hand’,’Joystick’] for the demo Reaching-Mackenzie-2018-08-30/config.yaml
to select only these two body parts.</p>
</dd>
<dt><strong>showfigures: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> then plots are also displayed.</p>
</dd>
<dt><strong>destfolder: string or None, optional, default=None</strong></dt><dd><p>Specifies the destination folder that was used for storing analysis data. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the path of the video is used.</p>
</dd>
<dt><strong>modelprefix: str, optional, default=””</strong></dt><dd><p>Directory containing the deeplabcut models to use when evaluating the network.
By default, the models are assumed to exist in the project folder.</p>
</dd>
<dt><strong>imagetype: string, optional, default=”.png”</strong></dt><dd><p>Specifies the output image format - ‘.tif’, ‘.jpg’, ‘.svg’ and “.png”.</p>
</dd>
<dt><strong>resolution: int, optional, default=100</strong></dt><dd><p>Specifies the resolution (in dpi) of saved figures.
Note higher resolution figures take longer to generate.</p>
</dd>
<dt><strong>linewidth: float, optional, default=1.0</strong></dt><dd><p>Specifies width of line for line and histogram plots.</p>
</dd>
<dt><strong>track_method: string, optional, default=””</strong></dt><dd><p>Specifies the tracker used to generate the data.
Empty by default (corresponding to a single animal project).
For multiple animals, must be either ‘box’, ‘skeleton’, or ‘ellipse’ and will
be taken from the config.yaml file if none is given.</p>
</dd>
<dt><strong>pcutoff: string, optional, default=None</strong></dt><dd><p>Overrides the pcutoff set in the project configuration to plot the trajectories.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt>None</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>To label the frames</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">plot_trajectories</span><span class="p">(</span>
<span class="go">        &#39;home/alex/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/home/alex/analysis/project/videos/reachingvideo1.avi&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="dropdown admonition">
<p class="admonition-title">Click the button to see API Docs for create_labeled_video</p>
<dl class="py function">
<dt class="sig sig-object py" id="deeplabcut.utils.make_labeled_video.create_labeled_video">
<span class="sig-prename descclassname"><span class="pre">deeplabcut.utils.make_labeled_video.</span></span><span class="sig-name descname"><span class="pre">create_labeled_video</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">config</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videos</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">videotype</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shuffle</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trainingsetindex</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">filtered</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fastmode</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">save_frames</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">keypoints_only</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Frames2plot</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displayedbodyparts</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displayedindividuals</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'all'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">codec</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'mp4v'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">outputframerate</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">destfolder</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Path</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">draw_skeleton</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trailpoints</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">displaycropped</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">color_by</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'bodypart'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">modelprefix</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">init_weights</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">track_method</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">superanimal_name</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pcutoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skeleton</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">list</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">[]</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skeleton_color</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'white'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">dotsize</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">int</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">8</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">colormap</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">str</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">'rainbow'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">alphavalue</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">0.5</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">overwrite</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">confidence_to_alpha</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">Callable</span><span class="p"><span class="pre">[</span></span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">plot_bboxes</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">bool</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bboxes_pcutoff</span></span><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="n"><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></span><span class="w"> </span><span class="o"><span class="pre">=</span></span><span class="w"> </span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="headerlink" href="#deeplabcut.utils.make_labeled_video.create_labeled_video" title="Link to this definition">#</a></dt>
<dd><p>Labels the bodyparts in a video.</p>
<p>Make sure the video is already analyzed by the function
<code class="docutils literal notranslate"><span class="pre">deeplabcut.analyze_videos</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>config</strong><span class="classifier">string</span></dt><dd><p>Full path of the config.yaml file.</p>
</dd>
<dt><strong>videos</strong><span class="classifier">list[str]</span></dt><dd><p>A list of strings containing the full paths to videos for analysis or a path
to the directory, where all the videos with same extension are stored.</p>
</dd>
<dt><strong>videotype: str, optional, default=””</strong></dt><dd><p>Checks for the extension of the video in case the input to the video is a
directory. Only videos with this extension are analyzed.
If left unspecified, videos with common extensions
(‘avi’, ‘mp4’, ‘mov’, ‘mpeg’, ‘mkv’) are kept.</p>
</dd>
<dt><strong>shuffle</strong><span class="classifier">int, optional, default=1</span></dt><dd><p>Number of shuffles of training dataset.</p>
</dd>
<dt><strong>trainingsetindex: int, optional, default=0</strong></dt><dd><p>Integer specifying which TrainingsetFraction to use.
Note that TrainingFraction is a list in config.yaml.</p>
</dd>
<dt><strong>filtered: bool, optional, default=False</strong></dt><dd><p>Boolean variable indicating if filtered output should be plotted rather than
frame-by-frame predictions. Filtered version can be calculated with
<code class="docutils literal notranslate"><span class="pre">deeplabcut.filterpredictions</span></code>.</p>
</dd>
<dt><strong>fastmode: bool, optional, default=True</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, uses openCV (much faster but less customization of video) instead
of matplotlib if <code class="docutils literal notranslate"><span class="pre">False</span></code>. You can also “save_frames” individually or not in
the matplotlib mode (if you set the “save_frames” variable accordingly).
However, using matplotlib to create the frames it therefore allows much more
flexible (one can set transparency of markers, crop, and easily customize).</p>
</dd>
<dt><strong>save_frames: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code>, creates each frame individual and then combines into a video.
Setting this to <code class="docutils literal notranslate"><span class="pre">True</span></code> is relatively slow as it stores all individual frames.</p>
</dd>
<dt><strong>keypoints_only: bool, optional, default=False</strong></dt><dd><p>By default, both video frames and keypoints are visible. If <code class="docutils literal notranslate"><span class="pre">True</span></code>, only the
keypoints are shown. These clips are an hommage to Johansson movies,
see <a class="reference external" href="https://www.youtube.com/watch?v=1F5ICP9SYLU">https://www.youtube.com/watch?v=1F5ICP9SYLU</a> and of course his seminal
paper: “Visual perception of biological motion and a model for its analysis”
by Gunnar Johansson in Perception &amp; Psychophysics 1973.</p>
</dd>
<dt><strong>Frames2plot: List[int] or None, optional, default=None</strong></dt><dd><p>If not <code class="docutils literal notranslate"><span class="pre">None</span></code> and <code class="docutils literal notranslate"><span class="pre">save_frames=True</span></code> then the frames corresponding to the
index will be plotted. For example, <code class="docutils literal notranslate"><span class="pre">Frames2plot=[0,11]</span></code> will plot the first
and the 12th frame.</p>
</dd>
<dt><strong>displayedbodyparts: list[str] or str, optional, default=”all”</strong></dt><dd><p>This selects the body parts that are plotted in the video. If <code class="docutils literal notranslate"><span class="pre">all</span></code>, then all
body parts from config.yaml are used. If a list of strings that are a subset of
the full list. E.g. [‘hand’,’Joystick’] for the demo
Reaching-Mackenzie-2018-08-30/config.yaml to select only these body parts.</p>
</dd>
<dt><strong>displayedindividuals: list[str] or str, optional, default=”all”</strong></dt><dd><p>Individuals plotted in the video.
By default, all individuals present in the config will be shown.</p>
</dd>
<dt><strong>codec: str, optional, default=”mp4v”</strong></dt><dd><p>Codec for labeled video. For available options, see
<a class="reference external" href="http://www.fourcc.org/codecs.php">http://www.fourcc.org/codecs.php</a>. Note that this depends on your ffmpeg
installation.</p>
</dd>
<dt><strong>outputframerate: int or None, optional, default=None</strong></dt><dd><p>Positive number, output frame rate for labeled video (only available for the
mode with saving frames.) If <code class="docutils literal notranslate"><span class="pre">None</span></code>, which results in the original video
rate.</p>
</dd>
<dt><strong>destfolder: Path, string or None, optional, default=None</strong></dt><dd><p>Specifies the destination folder that was used for storing analysis data. If
<code class="docutils literal notranslate"><span class="pre">None</span></code>, the path of the video file is used.</p>
</dd>
<dt><strong>draw_skeleton: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> adds a line connecting the body parts making a skeleton on each
frame. The body parts to be connected and the color of these connecting lines
are specified in the config file.</p>
</dd>
<dt><strong>trailpoints: int, optional, default=0</strong></dt><dd><p>Number of previous frames whose body parts are plotted in a frame
(for displaying history).</p>
</dd>
<dt><strong>displaycropped: bool, optional, default=False</strong></dt><dd><p>Specifies whether only cropped frame is displayed (with labels analyzed
therein), or the original frame with the labels analyzed in the cropped subset.</p>
</dd>
<dt><strong>color_by</strong><span class="classifier">string, optional, default=’bodypart’</span></dt><dd><p>Coloring rule. By default, each bodypart is colored differently.
If set to ‘individual’, points belonging to a single individual are colored the
same.</p>
</dd>
<dt><strong>modelprefix: str, optional, default=””</strong></dt><dd><p>Directory containing the deeplabcut models to use when evaluating the network.
By default, the models are assumed to exist in the project folder.</p>
</dd>
<dt><strong>init_weights: str,</strong></dt><dd><p>Checkpoint path to the super model</p>
</dd>
<dt><strong>track_method: string, optional, default=””</strong></dt><dd><p>Specifies the tracker used to generate the data.
Empty by default (corresponding to a single animal project).
For multiple animals, must be either ‘box’, ‘skeleton’, or ‘ellipse’ and will
be taken from the config.yaml file if none is given.</p>
</dd>
<dt><strong>superanimal_name: str, optional, default=””</strong></dt><dd><p>Name of the superanimal model.</p>
</dd>
<dt><strong>pcutoff: float, optional, default=None</strong></dt><dd><p>Overrides the pcutoff set in the project configuration to plot the trajectories.</p>
</dd>
<dt><strong>skeleton: list, optional, default=[],</strong></dt><dd></dd>
<dt><strong>skeleton_color: string, optional, default=”white”,</strong></dt><dd><p>Color for the skeleton</p>
</dd>
<dt><strong>dotsize, int, optional, default=8,</strong></dt><dd><p>Size of label dots tu use</p>
</dd>
<dt><strong>colormap: str, optional, default=”rainbow”,</strong></dt><dd><p>Colormap to use for the labels</p>
</dd>
<dt><strong>alphavalue: float, optional, default=0.5,</strong></dt><dd></dd>
<dt><strong>overwrite: bool, optional, default=False</strong></dt><dd><p>If <code class="docutils literal notranslate"><span class="pre">True</span></code> overwrites existing labeled videos.</p>
</dd>
<dt><strong>confidence_to_alpha: Union[bool, Callable[[float], float], default=False</strong></dt><dd><p>If False, all keypoints will be plot with alpha=1. Otherwise, this can be
defined as a function f: [0, 1] -&gt; [0, 1] such that the alpha value for a
keypoint will be set as a function of its score: alpha = f(score). The default
function used when True is f(x) = max(0, (x - pcutoff)/(1 - pcutoff)).</p>
</dd>
<dt><strong>plot_bboxes: bool, optional, default=True</strong></dt><dd><p>If using Pytorch and in Top-Down mode, setting this to true will also plot the bounding boxes</p>
</dd>
<dt><strong>bboxes_pcutoff, float, optional, default=None:</strong></dt><dd><p>If plotting bounding boxes, this overrides the bboxes_pcutoff set in the model configuration.</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><dl class="simple">
<dt><strong>results</strong><span class="classifier">list[bool]</span></dt><dd></dd>
<dt><code class="docutils literal notranslate"><span class="pre">True</span></code> if the video is successfully created for each item in <code class="docutils literal notranslate"><span class="pre">videos</span></code>.</dt><dd></dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>Create the labeled video for a single video</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/analysis/project/videos/reachingvideo1.avi&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Create the labeled video for a single video and store the individual frames</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/analysis/project/videos/reachingvideo1.avi&#39;],</span>
<span class="go">        fastmode=True,</span>
<span class="go">        save_frames=True,</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Create the labeled video for multiple videos</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo1.avi&#39;,</span>
<span class="go">            &#39;/analysis/project/videos/reachingvideo2.avi&#39;,</span>
<span class="go">        ],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Create the labeled video for all the videos with an .avi extension in a directory.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/analysis/project/videos/&#39;],</span>
<span class="go">    )</span>
</pre></div>
</div>
<p>Create the labeled video for all the videos with an .mp4 extension in a directory.</p>
<div class="doctest highlight-default notranslate"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">create_labeled_video</span><span class="p">(</span>
<span class="go">        &#39;/analysis/project/reaching-task/config.yaml&#39;,</span>
<span class="go">        [&#39;/analysis/project/videos/&#39;],</span>
<span class="go">        videotype=&#39;mp4&#39;,</span>
<span class="go">    )</span>
</pre></div>
</div>
</dd></dl>

</div>
</section>
<section id="help">
<h3>HELP:<a class="headerlink" href="#help" title="Link to this heading">#</a></h3>
<p>In ipython/Jupyter notebook:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>deeplabcut.nameofthefunction?
</pre></div>
</div>
<p>In python or pythonw:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">help</span><span class="p">(</span><span class="n">deeplabcut</span><span class="o">.</span><span class="n">nameofthefunction</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="tips-for-daily-use">
<h2>Tips for “daily” use:<a class="headerlink" href="#tips-for-daily-use" title="Link to this heading">#</a></h2>
<p align="center">
<img src= https://static1.squarespace.com/static/57f6d51c9f74566f55ecf271/t/5ccc5abe0d9297405a428522/1556896461304/howtouseDLC-01.png?format=1000w width="80%">
 </p>
<p>You can always exit an conda environment and easily jump back into a project by simply:</p>
<p>Linux/MacOS formatting example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">source</span> <span class="n">activate</span> <span class="n">yourdeeplabcutEnvName</span>
<span class="n">ipython</span> <span class="ow">or</span> <span class="n">pythonw</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">deeplabcut</span>
<span class="n">config_path</span> <span class="o">=</span><span class="s1">&#39;/home/yourprojectfolder/config.yaml&#39;</span>
</pre></div>
</div>
<p>Windows formatting example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">activate</span> <span class="n">yourdeeplabcutEnvName</span>
<span class="n">ipython</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">deeplabcut</span>
<span class="n">config_path</span> <span class="o">=</span> <span class="sa">r</span><span class="s1">&#39;C:\home\yourprojectfolder\config.yaml&#39;</span>
</pre></div>
</div>
<p>Now, you can run any of the functions described in this documentation.</p>
</section>
</section>
<section class="tex2jax_ignore mathjax_ignore" id="getting-help-with-madlc">
<h1>Getting help with maDLC:<a class="headerlink" href="#getting-help-with-madlc" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>If you have a detailed question about how to use the code, or you hit errors that are not “bugs” but you want code assistance, please post on the <a class="reference external" href="https://forum.image.sc/tags/deeplabcut"><img alt="Image.sc forum" src="https://img.shields.io/badge/dynamic/json.svg?label=forum&amp;url=https%3A%2F%2Fforum.image.sc%2Ftags%2Fdeeplabcut.json&amp;query=%24.topic_list.tags.0.topic_count&amp;colorB=brightgreen&amp;&amp;suffix=%20topics&amp;logo=data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAABPklEQVR42m3SyyqFURTA8Y2BER0TDyExZ+aSPIKUlPIITFzKeQWXwhBlQrmFgUzMMFLKZeguBu5y+//17dP3nc5vuPdee6299gohUYYaDGOyyACq4JmQVoFujOMR77hNfOAGM+hBOQqB9TjHD36xhAa04RCuuXeKOvwHVWIKL9jCK2bRiV284QgL8MwEjAneeo9VNOEaBhzALGtoRy02cIcWhE34jj5YxgW+E5Z4iTPkMYpPLCNY3hdOYEfNbKYdmNngZ1jyEzw7h7AIb3fRTQ95OAZ6yQpGYHMMtOTgouktYwxuXsHgWLLl+4x++Kx1FJrjLTagA77bTPvYgw1rRqY56e+w7GNYsqX6JfPwi7aR+Y5SA+BXtKIRfkfJAYgj14tpOF6+I46c4/cAM3UhM3JxyKsxiOIhH0IO6SH/A1Kb1WBeUjbkAAAAAElFTkSuQmCC" /></a></p></li>
<li><p>If you have a quick, short question that fits a “chat” format:
<a class="reference external" href="https://gitter.im/DeepLabCut/community?utm_source=badge&amp;amp;utm_medium=badge&amp;amp;utm_campaign=pr-badge"><img alt="Gitter" src="https://badges.gitter.im/DeepLabCut/community.svg" /></a></p></li>
<li><p>If you want to share some results, or see others:
<a class="reference external" href="https://twitter.com/DeepLabCut"><img alt="Twitter Follow" src="https://img.shields.io/twitter/follow/DeepLabCut.svg?label=DeepLabCut&amp;style=social" /></a></p></li>
<li><p>If you have a code bug report, please create an issue and show the minimal code to reproduce the error: <a class="github reference external" href="https://github.com/DeepLabCut/DeepLabCut/issues">DeepLabCut/DeepLabCut#issues</a></p></li>
<li><p>if you are looking for resources to increase your understanding of the software and general guidelines, we have an open source, free course: <a class="reference external" href="http://DLCcourse.deeplabcut.org">http://DLCcourse.deeplabcut.org</a>.</p></li>
</ul>
<p><strong>Please note:</strong> what we cannot do is provided support or help designing your experiments and data analysis. The number of requests for this is too great to sustain in our inbox. We are happy to answer such questions in the forum as a community, in a scalable way. We hope and believe we have given enough tools and resources to get started and to accelerate your research program, and this is backed by the &gt;700 citations using DLC, 2 clinical trials by others, and countless applications. Thus, we believe this code works, is accessible, and with limited programming knowledge can be used. Please read our <a class="reference internal" href="MISSION_AND_VALUES.html#mission-and-values"><span class="std std-ref">Missions &amp; Values statement</span></a> to learn more about what we DO hope to provide you.</p>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./docs"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="standardDeepLabCut_UserGuide.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">DeepLabCut User Guide (for single animal projects)</p>
      </div>
    </a>
    <a class="right-next"
       href="Overviewof3D.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">3D DeepLabCut</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">DeepLabCut for Multi-Animal Projects</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#how-to-think-about-using-madlc">How to think about using maDLC:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#install">Install:</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-started-in-the-terminal-or-project-gui">Get started in the terminal or Project GUI:</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#a-create-a-new-project">(A) Create a New Project</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#api-docs">API Docs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.create_project.new.create_new_project"><code class="docutils literal notranslate"><span class="pre">create_new_project()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#b-configure-the-project">(B) Configure the Project</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#c-select-frames-to-label">(C) Select Frames to Label</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.frame_extraction.extract_frames"><code class="docutils literal notranslate"><span class="pre">extract_frames()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#d-label-frames">(D) Label Frames</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#e-check-annotated-frames">(E) Check Annotated Frames</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.check_labels"><code class="docutils literal notranslate"><span class="pre">check_labels()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#f-create-training-dataset">(F) Create Training Dataset</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset"><code class="docutils literal notranslate"><span class="pre">create_training_dataset()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_model_comparison"><code class="docutils literal notranslate"><span class="pre">create_training_model_comparison()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.generate_training_dataset.trainingsetmanipulation.create_training_dataset_from_existing_split"><code class="docutils literal notranslate"><span class="pre">create_training_dataset_from_existing_split()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#g-train-the-network">(G) Train The Network</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.train_network"><code class="docutils literal notranslate"><span class="pre">train_network()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#h-evaluate-the-trained-network">(H) Evaluate the Trained Network</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.evaluate_network"><code class="docutils literal notranslate"><span class="pre">evaluate_network()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#i-analyze-new-videos">(I) Analyze new Videos</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#animal-assembly-and-tracking-across-frames">Animal Assembly and Tracking across frames</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#optimized-animal-assembly-video-analysis">Optimized Animal Assembly + Video Analysis:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-auto-track-true">IF auto_track = True:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#if-auto-track-false">IF auto_track = False:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#id1">API Docs</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.analyze_videos"><code class="docutils literal notranslate"><span class="pre">analyze_videos()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.compat.convert_detections2tracklets"><code class="docutils literal notranslate"><span class="pre">convert_detections2tracklets()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.refine_training_dataset.stitch.stitch_tracklets"><code class="docutils literal notranslate"><span class="pre">stitch_tracklets()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#using-unsupervised-identity-tracking">Using Unsupervised Identity Tracking:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#refine-tracklets">Refine Tracklets:</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#j-filter-pose-data">(J) Filter Pose Data</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.post_processing.filtering.filterpredictions"><code class="docutils literal notranslate"><span class="pre">filterpredictions()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#k-plot-trajectories-l-create-labeled-videos">(K) Plot Trajectories , (L) Create Labeled Videos</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.utils.plotting.plot_trajectories"><code class="docutils literal notranslate"><span class="pre">plot_trajectories()</span></code></a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#deeplabcut.utils.make_labeled_video.create_labeled_video"><code class="docutils literal notranslate"><span class="pre">create_labeled_video()</span></code></a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#help">HELP:</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#tips-for-daily-use">Tips for “daily” use:</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#getting-help-with-madlc">Getting help with maDLC:</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The DeepLabCut Team
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
<div class="extra_footer">
  <div>Powered by <a href="https://jupyterbook.org/">Jupyter Book</a>.</div>

</div>
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>